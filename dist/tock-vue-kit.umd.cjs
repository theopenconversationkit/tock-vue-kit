(function(O,i){typeof exports=="object"&&typeof module<"u"?i(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],i):(O=typeof globalThis<"u"?globalThis:O||self,i(O.TockVueKit={},O.Vue))})(this,function(O,i){"use strict";var Os=Object.defineProperty;var Rs=(O,i,Z)=>i in O?Os(O,i,{enumerable:!0,configurable:!0,writable:!0,value:Z}):O[i]=Z;var Ct=(O,i,Z)=>(Rs(O,typeof i!="symbol"?i+"":i,Z),Z);var Z=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let Nt;const me=e=>Nt=e,At=Symbol();function Ze(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var re;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(re||(re={}));function Yt(){const e=i.effectScope(!0),t=e.run(()=>i.ref({}));let n=[],o=[];const s=i.markRaw({install(r){me(s),s._a=r,r.provide(At,s),r.config.globalProperties.$pinia=s,o.forEach(a=>n.push(a)),o=[]},use(r){return!this._a&&!Z?o.push(r):n.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const Dt=()=>{};function It(e,t,n,o=Dt){e.push(t);const s=()=>{const r=e.indexOf(t);r>-1&&(e.splice(r,1),o())};return!n&&i.getCurrentScope()&&i.onScopeDispose(s),s}function te(e,...t){e.slice().forEach(n=>{n(...t)})}const Xt=e=>e();function et(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,o)=>e.set(o,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const o=t[n],s=e[n];Ze(s)&&Ze(o)&&e.hasOwnProperty(n)&&!i.isRef(o)&&!i.isReactive(o)?e[n]=et(s,o):e[n]=o}return e}const Zt=Symbol();function en(e){return!Ze(e)||!e.hasOwnProperty(Zt)}const{assign:v}=Object;function tn(e){return!!(i.isRef(e)&&e.effect)}function nn(e,t,n,o){const{state:s,actions:r,getters:a}=t,c=n.state.value[e];let u;function h(){c||(n.state.value[e]=s?s():{});const g=i.toRefs(n.state.value[e]);return v(g,r,Object.keys(a||{}).reduce((m,d)=>(m[d]=i.markRaw(i.computed(()=>{me(n);const f=n._s.get(e);return a[d].call(f,f)})),m),{}))}return u=Bt(e,h,t,n,o,!0),u}function Bt(e,t,n={},o,s,r){let a;const c=v({actions:{}},n),u={deep:!0};let h,g,m=[],d=[],f;const y=o.state.value[e];!r&&!y&&(o.state.value[e]={}),i.ref({});let k;function C(S){let T;h=g=!1,typeof S=="function"?(S(o.state.value[e]),T={type:re.patchFunction,storeId:e,events:f}):(et(o.state.value[e],S),T={type:re.patchObject,payload:S,storeId:e,events:f});const M=k=Symbol();i.nextTick().then(()=>{k===M&&(h=!0)}),g=!0,te(m,T,o.state.value[e])}const E=r?function(){const{state:T}=n,M=T?T():{};this.$patch(z=>{v(z,M)})}:Dt;function A(){a.stop(),m=[],d=[],o._s.delete(e)}function b(S,T){return function(){me(o);const M=Array.from(arguments),z=[],X=[];function he(B){z.push(B)}function Xe(B){X.push(B)}te(d,{args:M,name:S,store:N,after:he,onError:Xe});let K;try{K=T.apply(this&&this.$id===e?this:N,M)}catch(B){throw te(X,B),B}return K instanceof Promise?K.then(B=>(te(z,B),B)).catch(B=>(te(X,B),Promise.reject(B))):(te(z,K),K)}}const w={_p:o,$id:e,$onAction:It.bind(null,d),$patch:C,$reset:E,$subscribe(S,T={}){const M=It(m,S,T.detached,()=>z()),z=a.run(()=>i.watch(()=>o.state.value[e],X=>{(T.flush==="sync"?g:h)&&S({storeId:e,type:re.direct,events:f},X)},v({},u,T)));return M},$dispose:A},N=i.reactive(w);o._s.set(e,N);const j=(o._a&&o._a.runWithContext||Xt)(()=>o._e.run(()=>(a=i.effectScope()).run(t)));for(const S in j){const T=j[S];if(i.isRef(T)&&!tn(T)||i.isReactive(T))r||(y&&en(T)&&(i.isRef(T)?T.value=y[S]:et(T,y[S])),o.state.value[e][S]=T);else if(typeof T=="function"){const M=b(S,T);j[S]=M,c.actions[S]=T}}return v(N,j),v(i.toRaw(N),j),Object.defineProperty(N,"$state",{get:()=>o.state.value[e],set:S=>{C(T=>{v(T,S)})}}),o._p.forEach(S=>{v(N,a.run(()=>S({store:N,app:o._a,pinia:o,options:c})))}),y&&r&&n.hydrate&&n.hydrate(N.$state,y),h=!0,g=!0,N}function sn(e,t,n){let o,s;const r=typeof t=="function";typeof e=="string"?(o=e,s=r?n:t):(s=e,o=e.id);function a(c,u){const h=i.hasInjectionContext();return c=c||(h?i.inject(At,null):null),c&&me(c),c=Nt,c._s.has(o)||(r?Bt(o,t,s,c):nn(o,s,c)),c._s.get(o)}return a.$id=o,a}function on(){const e=Date.now().toString(36),t=Math.random().toString(36).substr(2,5);return(e+t).toUpperCase()}const _t=Symbol("tockEndpointKey");var D=(e=>(e.bot="bot",e.user="user",e.app="app",e))(D||{}),_=(e=>(e.message="message",e.card="card",e.carousel="carousel",e.image="image",e.loader="loader",e))(_||{});function tt(e){return e&&typeof e=="object"&&!Array.isArray(e)}function nt(e,...t){if(!t.length)return e;const n=t.shift();if(tt(e)&&tt(n))for(const o in n)tt(n[o])?(e[o]||Object.assign(e,{[o]:{}}),nt(e[o],n[o])):Object.assign(e,{[o]:n[o]});return nt(e,...t)}const Lt={localStorage:{enabled:!1,maxNumberMessages:20},preferences:{messages:{clearOnNewRequest:!1,hideIfNoMessages:!0,message:{hideUserMessages:!1,header:{display:!0,avatar:{display:!0,userIcon:"bi bi-person-fill",botIcon:"bi bi-robot"},label:{display:!0}}}},questionBar:{clearTypedCharsOnSubmit:!0,maxUserInputLength:500,clearHistory:{display:!0,icon:"bi bi-trash-fill"},submit:{icon:"bi bi-send-fill"}}},wording:{messages:{message:{header:{labelUser:"You",labelBot:"Bot"},footnotes:{sources:"Sources :"}}},questionBar:{clearHistory:{labelBefore:"",labelAfter:""},input:{placeholder:"Ask me a question..."},submit:{labelBefore:"",labelAfter:""}}}},F=class F{constructor(t){Ct(this,"options");this.options=nt(JSON.parse(JSON.stringify(Lt)),t)}static clearInstance(){F.instance&&(F.instance=void 0)}static getInstance(t){return F.instance||(F.instance=new F(t)),F.instance}};Ct(F,"instance");let x=F;const rn="main",Ot="main_storage",an=()=>({userId:on(),messages:[]}),Q=sn(rn,()=>{const e=i.inject(_t),t=x.getInstance().options,n=i.ref(o());function o(){if(t.localStorage.enabled){const f=s();if(f)return f}return an()}function s(){if(!t.localStorage.enabled)return!1;const f=localStorage.getItem(r());return f?JSON.parse(f):!1}function r(){let f=Ot;return t.localStorage.prefix&&(f=`${Ot}_${t.localStorage.prefix}`),f}const a=i.computed(()=>n.value.messages);function c(){n.value.messages=n.value.messages.filter(f=>f.type!==_.loader)}function u(){}function h(f){const y=Q();y.clearLoaderMessages(),y.scrollMessages(),g(f),n.value.messages.push(f)}function g(f){function y(){const C=Math.max(Math.random(),.3),E=Math.max(Math.random(),.3),A=Math.ceil(C*500),b=Math.ceil(E*500),w=Math.ceil(1),N=Math.floor(1084);return`https://picsum.photos/id/${Math.floor(Math.random()*(N-w)+w)}/${A}/${b}`}f.type===_.card&&(f.file.url=y()),f.type===_.carousel&&f.cards.forEach(k=>{k.file.url=y()})}async function m(f,y=!0){const k=Q();t.preferences.messages.clearOnNewRequest&&(n.value.messages=[]),y&&k.addMessage({type:_.message,author:D.user,text:f,date:Date.now()}),k.addMessage({type:_.loader,author:D.app,date:Date.now()});const C=navigator.language,E={query:f,userId:n.value.userId,locale:C},A=await(await fetch(e,{method:"post",body:JSON.stringify(E)})).json();if(k.clearLoaderMessages(),A.responses.forEach(b=>{delete b.type,delete b.version,"text"in b?k.addMessage({type:_.message,author:D.bot,date:Date.now(),...b}):"card"in b?k.addMessage({type:_.card,author:D.bot,date:Date.now(),...b.card}):"image"in b?k.addMessage({type:_.image,author:D.bot,date:Date.now(),...b.image}):"carousel"in b&&k.addMessage({type:_.carousel,author:D.bot,date:Date.now(),...b.carousel})}),t.localStorage.enabled){let b=JSON.stringify(n.value);if(t.localStorage.maxNumberMessages&&n.value.messages.length>t.localStorage.maxNumberMessages){const w=JSON.parse(b),N=w.messages.length-parseInt(t.localStorage.maxNumberMessages);N&&(w.messages=w.messages.slice(N,w.messages.length+1)),b=JSON.stringify(w)}localStorage.setItem(r(),b)}}function d(){n.value.messages=[],t.localStorage.enabled&&localStorage.setItem(r(),JSON.stringify(n.value))}return{state:n,getStoredState:s,getMessages:a,sendUserMessage:m,addMessage:h,clearHistory:d,clearLoaderMessages:c,scrollMessages:u}}),cn=["src"],ln=["maxlength","placeholder"],un={class:"tvk-question-bar-chars-count"},fn=["disabled"],hn=["src"],dn=i.defineComponent({__name:"question-block",setup(e){const t=x.getInstance().options,n=Q(),o=t.preferences.questionBar.maxUserInputLength,s=i.ref(null),r=i.ref("");function a(){s!=null&&s.value&&s.value.focus()}function c(){return r.value.trim().length}function u(){return c()>o}function h(){c()&&!u()&&(n.sendUserMessage(r.value),t.preferences.questionBar.clearTypedCharsOnSubmit&&(r.value=""))}function g(){n.clearHistory()}return(m,d)=>{var f;return i.openBlock(),i.createElementBlock("div",{class:"tvk-question-bar",onClick:a},[(f=i.unref(t).preferences.questionBar.clearHistory)!=null&&f.display?(i.openBlock(),i.createElementBlock("button",{key:0,class:"tvk-btn tvk-question-bar-clear-history",onClick:g},[i.createTextVNode(i.toDisplayString(i.unref(t).wording.questionBar.clearHistory.labelBefore)+" ",1),!i.unref(t).preferences.questionBar.clearHistory.image&&i.unref(t).preferences.questionBar.clearHistory.icon?(i.openBlock(),i.createElementBlock("i",{key:0,class:i.normalizeClass(i.unref(t).preferences.questionBar.clearHistory.icon)},null,2)):i.createCommentVNode("",!0),i.unref(t).preferences.questionBar.clearHistory.image?(i.openBlock(),i.createElementBlock("img",{key:1,src:i.unref(t).preferences.questionBar.clearHistory.image.src,style:i.normalizeStyle({width:i.unref(t).preferences.questionBar.clearHistory.image.width,height:i.unref(t).preferences.questionBar.clearHistory.image.height})},null,12,cn)):i.createCommentVNode("",!0),i.createTextVNode(" "+i.toDisplayString(i.unref(t).wording.questionBar.clearHistory.labelAfter),1)])):i.createCommentVNode("",!0),i.createElementVNode("form",{onSubmit:i.withModifiers(h,["prevent"]),class:"tvk-question-bar-form"},[i.withDirectives(i.createElementVNode("input",{ref_key:"input",ref:s,class:"tvk-question-bar-input",maxlength:i.unref(t).preferences.questionBar.maxUserInputLength,placeholder:i.unref(t).wording.questionBar.input.placeholder,"onUpdate:modelValue":d[0]||(d[0]=y=>r.value=y)},null,8,ln),[[i.vModelText,r.value]]),i.createElementVNode("div",un,i.toDisplayString(c())+"/"+i.toDisplayString(i.unref(o)),1)],32),i.createElementVNode("button",{onClick:h,disabled:!r.value.trim().length||u(),class:"tvk-btn tvk-question-bar-btn-submit"},[i.createTextVNode(i.toDisplayString(i.unref(t).wording.questionBar.submit.labelBefore)+" ",1),!i.unref(t).preferences.questionBar.submit.image&&i.unref(t).preferences.questionBar.submit.icon?(i.openBlock(),i.createElementBlock("i",{key:0,class:i.normalizeClass(i.unref(t).preferences.questionBar.submit.icon)},null,2)):i.createCommentVNode("",!0),i.unref(t).preferences.questionBar.submit.image?(i.openBlock(),i.createElementBlock("img",{key:1,src:i.unref(t).preferences.questionBar.submit.image.src,style:i.normalizeStyle({width:i.unref(t).preferences.questionBar.submit.image.width,height:i.unref(t).preferences.questionBar.submit.image.height})},null,12,hn)):i.createCommentVNode("",!0),i.createTextVNode(" "+i.toDisplayString(i.unref(t).wording.questionBar.submit.labelAfter),1)],8,fn)])}}}),mn="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",pn="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",ne=(e,t)=>{for(const n in t)e[n]=t[n];return e},st="numeric",it="ascii",ot="alpha",pe="asciinumeric",ge="alphanumeric",rt="domain",Rt="emoji",gn="scheme",yn="slashscheme",wt="whitespace";function bn(e,t){return e in t||(t[e]=[]),t[e]}function ee(e,t,n){t[st]&&(t[pe]=!0,t[ge]=!0),t[it]&&(t[pe]=!0,t[ot]=!0),t[pe]&&(t[ge]=!0),t[ot]&&(t[ge]=!0),t[ge]&&(t[rt]=!0),t[Rt]&&(t[rt]=!0);for(const o in t){const s=bn(o,n);s.indexOf(e)<0&&s.push(e)}}function kn(e,t){const n={};for(const o in t)t[o].indexOf(e)>=0&&(n[o]=!0);return n}function P(e){e===void 0&&(e=null),this.j={},this.jr=[],this.jd=null,this.t=e}P.groups={},P.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let o=0;o<t.jr.length;o++){const s=t.jr[o][0],r=t.jr[o][1];if(r&&s.test(e))return r}return t.jd},has(e,t){return t===void 0&&(t=!1),t?e in this.j:!!this.go(e)},ta(e,t,n,o){for(let s=0;s<e.length;s++)this.tt(e[s],t,n,o)},tr(e,t,n,o){o=o||P.groups;let s;return t&&t.j?s=t:(s=new P(t),n&&o&&ee(t,n,o)),this.jr.push([e,s]),s},ts(e,t,n,o){let s=this;const r=e.length;if(!r)return s;for(let a=0;a<r-1;a++)s=s.tt(e[a]);return s.tt(e[r-1],t,n,o)},tt(e,t,n,o){o=o||P.groups;const s=this;if(t&&t.j)return s.j[e]=t,t;const r=t;let a,c=s.go(e);if(c?(a=new P,ne(a.j,c.j),a.jr.push.apply(a.jr,c.jr),a.jd=c.jd,a.t=c.t):a=new P,r){if(o)if(a.t&&typeof a.t=="string"){const u=ne(kn(a.t,o),n);ee(r,u,o)}else n&&ee(r,n,o);a.t=r}return s.j[e]=a,a}};const p=(e,t,n,o,s)=>e.ta(t,n,o,s),H=(e,t,n,o,s)=>e.tr(t,n,o,s),xt=(e,t,n,o,s)=>e.ts(t,n,o,s),l=(e,t,n,o,s)=>e.tt(t,n,o,s),W="WORD",at="UWORD",ae="LOCALHOST",ct="TLD",lt="UTLD",ye="SCHEME",se="SLASH_SCHEME",ut="NUM",Pt="WS",ft="NL",ce="OPENBRACE",le="CLOSEBRACE",be="OPENBRACKET",ke="CLOSEBRACKET",Te="OPENPAREN",Ee="CLOSEPAREN",Se="OPENANGLEBRACKET",Ce="CLOSEANGLEBRACKET",Ne="FULLWIDTHLEFTPAREN",Ae="FULLWIDTHRIGHTPAREN",De="LEFTCORNERBRACKET",Ie="RIGHTCORNERBRACKET",Be="LEFTWHITECORNERBRACKET",_e="RIGHTWHITECORNERBRACKET",Le="FULLWIDTHLESSTHAN",Oe="FULLWIDTHGREATERTHAN",Re="AMPERSAND",we="APOSTROPHE",xe="ASTERISK",J="AT",Pe="BACKSLASH",He="BACKTICK",Ve="CARET",G="COLON",ht="COMMA",Me="DOLLAR",U="DOT",je="EQUALS",dt="EXCLAMATION",$="HYPHEN",ze="PERCENT",Ue="PIPE",$e="PLUS",qe="POUND",We="QUERY",mt="QUOTE",pt="SEMI",q="SLASH",ue="TILDE",Fe="UNDERSCORE",Ht="EMOJI",Ke="SYM";var Vt=Object.freeze({__proto__:null,WORD:W,UWORD:at,LOCALHOST:ae,TLD:ct,UTLD:lt,SCHEME:ye,SLASH_SCHEME:se,NUM:ut,WS:Pt,NL:ft,OPENBRACE:ce,CLOSEBRACE:le,OPENBRACKET:be,CLOSEBRACKET:ke,OPENPAREN:Te,CLOSEPAREN:Ee,OPENANGLEBRACKET:Se,CLOSEANGLEBRACKET:Ce,FULLWIDTHLEFTPAREN:Ne,FULLWIDTHRIGHTPAREN:Ae,LEFTCORNERBRACKET:De,RIGHTCORNERBRACKET:Ie,LEFTWHITECORNERBRACKET:Be,RIGHTWHITECORNERBRACKET:_e,FULLWIDTHLESSTHAN:Le,FULLWIDTHGREATERTHAN:Oe,AMPERSAND:Re,APOSTROPHE:we,ASTERISK:xe,AT:J,BACKSLASH:Pe,BACKTICK:He,CARET:Ve,COLON:G,COMMA:ht,DOLLAR:Me,DOT:U,EQUALS:je,EXCLAMATION:dt,HYPHEN:$,PERCENT:ze,PIPE:Ue,PLUS:$e,POUND:qe,QUERY:We,QUOTE:mt,SEMI:pt,SLASH:q,TILDE:ue,UNDERSCORE:Fe,EMOJI:Ht,SYM:Ke});const ie=/[a-z]/,gt=new RegExp("\\p{L}","u"),yt=new RegExp("\\p{Emoji}","u"),bt=/\d/,Mt=/\s/,jt=`
`,Tn="️",En="‍";let ve=null,Qe=null;function Sn(e){e===void 0&&(e=[]);const t={};P.groups=t;const n=new P;ve==null&&(ve=zt(mn)),Qe==null&&(Qe=zt(pn)),l(n,"'",we),l(n,"{",ce),l(n,"}",le),l(n,"[",be),l(n,"]",ke),l(n,"(",Te),l(n,")",Ee),l(n,"<",Se),l(n,">",Ce),l(n,"（",Ne),l(n,"）",Ae),l(n,"「",De),l(n,"」",Ie),l(n,"『",Be),l(n,"』",_e),l(n,"＜",Le),l(n,"＞",Oe),l(n,"&",Re),l(n,"*",xe),l(n,"@",J),l(n,"`",He),l(n,"^",Ve),l(n,":",G),l(n,",",ht),l(n,"$",Me),l(n,".",U),l(n,"=",je),l(n,"!",dt),l(n,"-",$),l(n,"%",ze),l(n,"|",Ue),l(n,"+",$e),l(n,"#",qe),l(n,"?",We),l(n,'"',mt),l(n,"/",q),l(n,";",pt),l(n,"~",ue),l(n,"_",Fe),l(n,"\\",Pe);const o=H(n,bt,ut,{[st]:!0});H(o,bt,o);const s=H(n,ie,W,{[it]:!0});H(s,ie,s);const r=H(n,gt,at,{[ot]:!0});H(r,ie),H(r,gt,r);const a=H(n,Mt,Pt,{[wt]:!0});l(n,jt,ft,{[wt]:!0}),l(a,jt),H(a,Mt,a);const c=H(n,yt,Ht,{[Rt]:!0});H(c,yt,c),l(c,Tn,c);const u=l(c,En);H(u,yt,c);const h=[[ie,s]],g=[[ie,null],[gt,r]];for(let m=0;m<ve.length;m++)Y(n,ve[m],ct,W,h);for(let m=0;m<Qe.length;m++)Y(n,Qe[m],lt,at,g);ee(ct,{tld:!0,ascii:!0},t),ee(lt,{utld:!0,alpha:!0},t),Y(n,"file",ye,W,h),Y(n,"mailto",ye,W,h),Y(n,"http",se,W,h),Y(n,"https",se,W,h),Y(n,"ftp",se,W,h),Y(n,"ftps",se,W,h),ee(ye,{scheme:!0,ascii:!0},t),ee(se,{slashscheme:!0,ascii:!0},t),e=e.sort((m,d)=>m[0]>d[0]?1:-1);for(let m=0;m<e.length;m++){const d=e[m][0],y=e[m][1]?{[gn]:!0}:{[yn]:!0};d.indexOf("-")>=0?y[rt]=!0:ie.test(d)?bt.test(d)?y[pe]=!0:y[it]=!0:y[st]=!0,xt(n,d,d,y)}return xt(n,"localhost",ae,{ascii:!0}),n.jd=new P(Ke),{start:n,tokens:ne({groups:t},Vt)}}function Cn(e,t){const n=Nn(t.replace(/[A-Z]/g,c=>c.toLowerCase())),o=n.length,s=[];let r=0,a=0;for(;a<o;){let c=e,u=null,h=0,g=null,m=-1,d=-1;for(;a<o&&(u=c.go(n[a]));)c=u,c.accepts()?(m=0,d=0,g=c):m>=0&&(m+=n[a].length,d++),h+=n[a].length,r+=n[a].length,a++;r-=m,a-=d,h-=m,s.push({t:g.t,v:t.slice(r-h,r),s:r-h,e:r})}return s}function Nn(e){const t=[],n=e.length;let o=0;for(;o<n;){let s=e.charCodeAt(o),r,a=s<55296||s>56319||o+1===n||(r=e.charCodeAt(o+1))<56320||r>57343?e[o]:e.slice(o,o+2);t.push(a),o+=a.length}return t}function Y(e,t,n,o,s){let r;const a=t.length;for(let c=0;c<a-1;c++){const u=t[c];e.j[u]?r=e.j[u]:(r=new P(o),r.jr=s.slice(),e.j[u]=r),e=r}return r=new P(n),r.jr=s.slice(),e.j[t[a-1]]=r,r}function zt(e){const t=[],n=[];let o=0,s="0123456789";for(;o<e.length;){let r=0;for(;s.indexOf(e[o+r])>=0;)r++;if(r>0){t.push(n.join(""));for(let a=parseInt(e.substring(o,o+r),10);a>0;a--)n.pop();o+=r}else n.push(e[o]),o++}return t}const fe={defaultProtocol:"http",events:null,format:Ut,formatHref:Ut,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function kt(e,t){t===void 0&&(t=null);let n=ne({},fe);e&&(n=ne(n,e instanceof kt?e.o:e));const o=n.ignoreTags,s=[];for(let r=0;r<o.length;r++)s.push(o[r].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=s}kt.prototype={o:fe,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const o=t!=null;let s=this.o[e];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:fe[e],typeof s=="function"&&o&&(s=s(t,n))):typeof s=="function"&&o&&(s=s(t,n.t,n)),s)},getObj(e,t,n){let o=this.o[e];return typeof o=="function"&&t!=null&&(o=o(t,n.t,n)),o},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function Ut(e){return e}function $t(e,t){this.t="token",this.v=e,this.tk=t}$t.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),o=e.get("format",t,this);return n&&o.length>n?o.substring(0,n)+"…":o},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e){return e===void 0&&(e=fe.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),o=e.get("formatHref",n,this),s=e.get("tagName",n,t),r=this.toFormattedString(e),a={},c=e.get("className",n,t),u=e.get("target",n,t),h=e.get("rel",n,t),g=e.getObj("attributes",n,t),m=e.getObj("events",n,t);return a.href=o,c&&(a.class=c),u&&(a.target=u),h&&(a.rel=h),g&&ne(a,g),{tagName:s,attributes:a,content:r,eventListeners:m}}};function Je(e,t){class n extends $t{constructor(s,r){super(s,r),this.t=e}}for(const o in t)n.prototype[o]=t[o];return n.t=e,n}const qt=Je("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Wt=Je("text"),An=Je("nl"),Ge=Je("url",{isLink:!0,toHref(e){return e===void 0&&(e=fe.defaultProtocol),this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==ae&&e[1].t===G}}),V=e=>new P(e);function Dn(e){let{groups:t}=e;const n=t.domain.concat([Re,xe,J,Pe,He,Ve,Me,je,$,ut,ze,Ue,$e,qe,q,Ke,ue,Fe]),o=[we,G,ht,U,dt,We,mt,pt,Se,Ce,ce,le,ke,be,Te,Ee,Ne,Ae,De,Ie,Be,_e,Le,Oe],s=[Re,we,xe,Pe,He,Ve,Me,je,$,ce,le,ze,Ue,$e,qe,We,q,Ke,ue,Fe],r=V(),a=l(r,ue);p(a,s,a),p(a,t.domain,a);const c=V(),u=V(),h=V();p(r,t.domain,c),p(r,t.scheme,u),p(r,t.slashscheme,h),p(c,s,a),p(c,t.domain,c);const g=l(c,J);l(a,J,g),l(u,J,g),l(h,J,g);const m=l(a,U);p(m,s,a),p(m,t.domain,a);const d=V();p(g,t.domain,d),p(d,t.domain,d);const f=l(d,U);p(f,t.domain,d);const y=V(qt);p(f,t.tld,y),p(f,t.utld,y),l(g,ae,y);const k=l(d,$);p(k,t.domain,d),p(y,t.domain,d),l(y,U,f),l(y,$,k);const C=l(y,G);p(C,t.numeric,qt);const E=l(c,$),A=l(c,U);p(E,t.domain,c),p(A,s,a),p(A,t.domain,c);const b=V(Ge);p(A,t.tld,b),p(A,t.utld,b),p(b,t.domain,c),p(b,s,a),l(b,U,A),l(b,$,E),l(b,J,g);const w=l(b,G),N=V(Ge);p(w,t.numeric,N);const I=V(Ge),j=V();p(I,n,I),p(I,o,j),p(j,n,I),p(j,o,j),l(b,q,I),l(N,q,I);const S=l(u,G),T=l(h,G),M=l(T,q),z=l(M,q);p(u,t.domain,c),l(u,U,A),l(u,$,E),p(h,t.domain,c),l(h,U,A),l(h,$,E),p(S,t.domain,I),l(S,q,I),p(z,t.domain,I),p(z,n,I),l(z,q,I);const X=[[ce,le],[be,ke],[Te,Ee],[Se,Ce],[Ne,Ae],[De,Ie],[Be,_e],[Le,Oe]];for(let he=0;he<X.length;he++){const[Xe,K]=X[he],B=l(I,Xe);l(j,Xe,B),l(B,K,I);const oe=V(Ge);p(B,n,oe);const de=V();p(B,o),p(oe,n,oe),p(oe,o,de),p(de,n,oe),p(de,o,de),l(oe,K,I),l(de,K,I)}return l(r,ae,b),l(r,ft,An),{start:r,tokens:Vt}}function In(e,t,n){let o=n.length,s=0,r=[],a=[];for(;s<o;){let c=e,u=null,h=null,g=0,m=null,d=-1;for(;s<o&&!(u=c.go(n[s].t));)a.push(n[s++]);for(;s<o&&(h=u||c.go(n[s].t));)u=null,c=h,c.accepts()?(d=0,m=c):d>=0&&d++,s++,g++;if(d<0)s-=g,s<o&&(a.push(n[s]),s++);else{a.length>0&&(r.push(Tt(Wt,t,a)),a=[]),s-=d,g-=d;const f=m.t,y=n.slice(s-g,s);r.push(Tt(f,t,y))}}return a.length>0&&r.push(Tt(Wt,t,a)),r}function Tt(e,t,n){const o=n[0].s,s=n[n.length-1].e,r=t.slice(o,s);return new e(r,n)}const R={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Bn(){R.scanner=Sn(R.customSchemes);for(let e=0;e<R.tokenQueue.length;e++)R.tokenQueue[e][1]({scanner:R.scanner});R.parser=Dn(R.scanner.tokens);for(let e=0;e<R.pluginQueue.length;e++)R.pluginQueue[e][1]({scanner:R.scanner,parser:R.parser});R.initialized=!0}function _n(e){return R.initialized||Bn(),In(R.parser.start,e,Cn(R.scanner.start,e))}var Ln={amp:"&",gt:">",lt:"<",nbsp:" ",quot:'"'},On=/^#[xX]([A-Fa-f0-9]+)$/,Rn=/^#([0-9]+)$/,wn=/^([A-Za-z0-9]+)$/,xn=function(){function e(t){this.named=t}return e.prototype.parse=function(t){if(t){var n=t.match(On);if(n)return String.fromCharCode(parseInt(n[1],16));if(n=t.match(Rn),n)return String.fromCharCode(parseInt(n[1],10));if(n=t.match(wn),n)return this.named[n[1]]||"&"+n[1]+";"}},e}(),Pn=/[\t\n\f ]/,Hn=/[A-Za-z]/,Vn=/\r\n?/g;function L(e){return Pn.test(e)}function Ft(e){return Hn.test(e)}function Mn(e){return e.replace(Vn,`
`)}var jn=function(){function e(t,n,o){o===void 0&&(o="precompile"),this.delegate=t,this.entityParser=n,this.mode=o,this.state="beforeData",this.line=-1,this.column=-1,this.input="",this.index=-1,this.tagNameBuffer="",this.states={beforeData:function(){var s=this.peek();if(s==="<"&&!this.isIgnoredEndTag())this.transitionTo("tagOpen"),this.markTagStart(),this.consume();else{if(this.mode==="precompile"&&s===`
`){var r=this.tagNameBuffer.toLowerCase();(r==="pre"||r==="textarea")&&this.consume()}this.transitionTo("data"),this.delegate.beginData()}},data:function(){var s=this.peek(),r=this.tagNameBuffer;s==="<"&&!this.isIgnoredEndTag()?(this.delegate.finishData(),this.transitionTo("tagOpen"),this.markTagStart(),this.consume()):s==="&"&&r!=="script"&&r!=="style"?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(s))},tagOpen:function(){var s=this.consume();s==="!"?this.transitionTo("markupDeclarationOpen"):s==="/"?this.transitionTo("endTagOpen"):(s==="@"||s===":"||Ft(s))&&(this.transitionTo("tagName"),this.tagNameBuffer="",this.delegate.beginStartTag(),this.appendToTagName(s))},markupDeclarationOpen:function(){var s=this.consume();if(s==="-"&&this.peek()==="-")this.consume(),this.transitionTo("commentStart"),this.delegate.beginComment();else{var r=s.toUpperCase()+this.input.substring(this.index,this.index+6).toUpperCase();r==="DOCTYPE"&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.transitionTo("doctype"),this.delegate.beginDoctype&&this.delegate.beginDoctype())}},doctype:function(){var s=this.consume();L(s)&&this.transitionTo("beforeDoctypeName")},beforeDoctypeName:function(){var s=this.consume();L(s)||(this.transitionTo("doctypeName"),this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(s.toLowerCase()))},doctypeName:function(){var s=this.consume();L(s)?this.transitionTo("afterDoctypeName"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(s.toLowerCase())},afterDoctypeName:function(){var s=this.consume();if(!L(s))if(s===">")this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData");else{var r=s.toUpperCase()+this.input.substring(this.index,this.index+5).toUpperCase(),a=r.toUpperCase()==="PUBLIC",c=r.toUpperCase()==="SYSTEM";(a||c)&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume()),a?this.transitionTo("afterDoctypePublicKeyword"):c&&this.transitionTo("afterDoctypeSystemKeyword")}},afterDoctypePublicKeyword:function(){var s=this.peek();L(s)?(this.transitionTo("beforeDoctypePublicIdentifier"),this.consume()):s==='"'?(this.transitionTo("doctypePublicIdentifierDoubleQuoted"),this.consume()):s==="'"?(this.transitionTo("doctypePublicIdentifierSingleQuoted"),this.consume()):s===">"&&(this.consume(),this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},doctypePublicIdentifierDoubleQuoted:function(){var s=this.consume();s==='"'?this.transitionTo("afterDoctypePublicIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(s)},doctypePublicIdentifierSingleQuoted:function(){var s=this.consume();s==="'"?this.transitionTo("afterDoctypePublicIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(s)},afterDoctypePublicIdentifier:function(){var s=this.consume();L(s)?this.transitionTo("betweenDoctypePublicAndSystemIdentifiers"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):s==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):s==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted")},betweenDoctypePublicAndSystemIdentifiers:function(){var s=this.consume();L(s)||(s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):s==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):s==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted"))},doctypeSystemIdentifierDoubleQuoted:function(){var s=this.consume();s==='"'?this.transitionTo("afterDoctypeSystemIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(s)},doctypeSystemIdentifierSingleQuoted:function(){var s=this.consume();s==="'"?this.transitionTo("afterDoctypeSystemIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(s)},afterDoctypeSystemIdentifier:function(){var s=this.consume();L(s)||s===">"&&(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},commentStart:function(){var s=this.consume();s==="-"?this.transitionTo("commentStartDash"):s===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData(s),this.transitionTo("comment"))},commentStartDash:function(){var s=this.consume();s==="-"?this.transitionTo("commentEnd"):s===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("-"),this.transitionTo("comment"))},comment:function(){var s=this.consume();s==="-"?this.transitionTo("commentEndDash"):this.delegate.appendToCommentData(s)},commentEndDash:function(){var s=this.consume();s==="-"?this.transitionTo("commentEnd"):(this.delegate.appendToCommentData("-"+s),this.transitionTo("comment"))},commentEnd:function(){var s=this.consume();s===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("--"+s),this.transitionTo("comment"))},tagName:function(){var s=this.consume();L(s)?this.transitionTo("beforeAttributeName"):s==="/"?this.transitionTo("selfClosingStartTag"):s===">"?(this.delegate.finishTag(),this.transitionTo("beforeData")):this.appendToTagName(s)},endTagName:function(){var s=this.consume();L(s)?(this.transitionTo("beforeAttributeName"),this.tagNameBuffer=""):s==="/"?(this.transitionTo("selfClosingStartTag"),this.tagNameBuffer=""):s===">"?(this.delegate.finishTag(),this.transitionTo("beforeData"),this.tagNameBuffer=""):this.appendToTagName(s)},beforeAttributeName:function(){var s=this.peek();if(L(s)){this.consume();return}else s==="/"?(this.transitionTo("selfClosingStartTag"),this.consume()):s===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):s==="="?(this.delegate.reportSyntaxError("attribute name cannot start with equals sign"),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(s)):(this.transitionTo("attributeName"),this.delegate.beginAttribute())},attributeName:function(){var s=this.peek();L(s)?(this.transitionTo("afterAttributeName"),this.consume()):s==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):s==="="?(this.transitionTo("beforeAttributeValue"),this.consume()):s===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):s==='"'||s==="'"||s==="<"?(this.delegate.reportSyntaxError(s+" is not a valid character within attribute names"),this.consume(),this.delegate.appendToAttributeName(s)):(this.consume(),this.delegate.appendToAttributeName(s))},afterAttributeName:function(){var s=this.peek();if(L(s)){this.consume();return}else s==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):s==="="?(this.consume(),this.transitionTo("beforeAttributeValue")):s===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(s))},beforeAttributeValue:function(){var s=this.peek();L(s)?this.consume():s==='"'?(this.transitionTo("attributeValueDoubleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):s==="'"?(this.transitionTo("attributeValueSingleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):s===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.transitionTo("attributeValueUnquoted"),this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(s))},attributeValueDoubleQuoted:function(){var s=this.consume();s==='"'?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):s==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(s)},attributeValueSingleQuoted:function(){var s=this.consume();s==="'"?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):s==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(s)},attributeValueUnquoted:function(){var s=this.peek();L(s)?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("beforeAttributeName")):s==="/"?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):s==="&"?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef()||"&")):s===">"?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.consume(),this.delegate.appendToAttributeValue(s))},afterAttributeValueQuoted:function(){var s=this.peek();L(s)?(this.consume(),this.transitionTo("beforeAttributeName")):s==="/"?(this.consume(),this.transitionTo("selfClosingStartTag")):s===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},selfClosingStartTag:function(){var s=this.peek();s===">"?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},endTagOpen:function(){var s=this.consume();(s==="@"||s===":"||Ft(s))&&(this.transitionTo("endTagName"),this.tagNameBuffer="",this.delegate.beginEndTag(),this.appendToTagName(s))}},this.reset()}return e.prototype.reset=function(){this.transitionTo("beforeData"),this.input="",this.tagNameBuffer="",this.index=0,this.line=1,this.column=0,this.delegate.reset()},e.prototype.transitionTo=function(t){this.state=t},e.prototype.tokenize=function(t){this.reset(),this.tokenizePart(t),this.tokenizeEOF()},e.prototype.tokenizePart=function(t){for(this.input+=Mn(t);this.index<this.input.length;){var n=this.states[this.state];if(n!==void 0)n.call(this);else throw new Error("unhandled state "+this.state)}},e.prototype.tokenizeEOF=function(){this.flushData()},e.prototype.flushData=function(){this.state==="data"&&(this.delegate.finishData(),this.transitionTo("beforeData"))},e.prototype.peek=function(){return this.input.charAt(this.index)},e.prototype.consume=function(){var t=this.peek();return this.index++,t===`
`?(this.line++,this.column=0):this.column++,t},e.prototype.consumeCharRef=function(){var t=this.input.indexOf(";",this.index);if(t!==-1){var n=this.input.slice(this.index,t),o=this.entityParser.parse(n);if(o){for(var s=n.length;s;)this.consume(),s--;return this.consume(),o}}},e.prototype.markTagStart=function(){this.delegate.tagOpen()},e.prototype.appendToTagName=function(t){this.tagNameBuffer+=t,this.delegate.appendToTagName(t)},e.prototype.isIgnoredEndTag=function(){var t=this.tagNameBuffer;return t==="title"&&this.input.substring(this.index,this.index+8)!=="</title>"||t==="style"&&this.input.substring(this.index,this.index+8)!=="</style>"||t==="script"&&this.input.substring(this.index,this.index+9)!=="<\/script>"},e}(),zn=function(){function e(t,n){n===void 0&&(n={}),this.options=n,this.token=null,this.startLine=1,this.startColumn=0,this.tokens=[],this.tokenizer=new jn(this,t,n.mode),this._currentAttribute=void 0}return e.prototype.tokenize=function(t){return this.tokens=[],this.tokenizer.tokenize(t),this.tokens},e.prototype.tokenizePart=function(t){return this.tokens=[],this.tokenizer.tokenizePart(t),this.tokens},e.prototype.tokenizeEOF=function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},e.prototype.reset=function(){this.token=null,this.startLine=1,this.startColumn=0},e.prototype.current=function(){var t=this.token;if(t===null)throw new Error("token was unexpectedly null");if(arguments.length===0)return t;for(var n=0;n<arguments.length;n++)if(t.type===arguments[n])return t;throw new Error("token type was unexpectedly "+t.type)},e.prototype.push=function(t){this.token=t,this.tokens.push(t)},e.prototype.currentAttribute=function(){return this._currentAttribute},e.prototype.addLocInfo=function(){this.options.loc&&(this.current().loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},e.prototype.beginDoctype=function(){this.push({type:"Doctype",name:""})},e.prototype.appendToDoctypeName=function(t){this.current("Doctype").name+=t},e.prototype.appendToDoctypePublicIdentifier=function(t){var n=this.current("Doctype");n.publicIdentifier===void 0?n.publicIdentifier=t:n.publicIdentifier+=t},e.prototype.appendToDoctypeSystemIdentifier=function(t){var n=this.current("Doctype");n.systemIdentifier===void 0?n.systemIdentifier=t:n.systemIdentifier+=t},e.prototype.endDoctype=function(){this.addLocInfo()},e.prototype.beginData=function(){this.push({type:"Chars",chars:""})},e.prototype.appendToData=function(t){this.current("Chars").chars+=t},e.prototype.finishData=function(){this.addLocInfo()},e.prototype.beginComment=function(){this.push({type:"Comment",chars:""})},e.prototype.appendToCommentData=function(t){this.current("Comment").chars+=t},e.prototype.finishComment=function(){this.addLocInfo()},e.prototype.tagOpen=function(){},e.prototype.beginStartTag=function(){this.push({type:"StartTag",tagName:"",attributes:[],selfClosing:!1})},e.prototype.beginEndTag=function(){this.push({type:"EndTag",tagName:""})},e.prototype.finishTag=function(){this.addLocInfo()},e.prototype.markTagAsSelfClosing=function(){this.current("StartTag").selfClosing=!0},e.prototype.appendToTagName=function(t){this.current("StartTag","EndTag").tagName+=t},e.prototype.beginAttribute=function(){this._currentAttribute=["","",!1]},e.prototype.appendToAttributeName=function(t){this.currentAttribute()[0]+=t},e.prototype.beginAttributeValue=function(t){this.currentAttribute()[2]=t},e.prototype.appendToAttributeValue=function(t){this.currentAttribute()[1]+=t},e.prototype.finishAttributeValue=function(){this.current("StartTag").attributes.push(this._currentAttribute)},e.prototype.reportSyntaxError=function(t){this.current().syntaxError=t},e}();function Un(e,t){var n=new zn(new xn(Ln),t);return n.tokenize(e)}const Kt="LinkifyResult",Ye="StartTag",vt="EndTag",Et="Chars",$n="Comment",qn="Doctype";function Wn(e,t){t===void 0&&(t={});const n=Un(e),o=[],s=[],r=new kt(t,vn);for(let a=0;a<n.length;a++){const c=n[a];if(c.type===Ye){o.push(c);const u=c.tagName.toUpperCase();if(!(u==="A"||r.ignoreTags.indexOf(u)>=0))continue;let g=o.length;Kn(u,n,++a,o),a+=o.length-g-1}else if(c.type!==Et)o.push(c);else{const u=Fn(c.chars,r);o.push.apply(o,u)}}for(let a=0;a<o.length;a++){const c=o[a];switch(c.type){case Kt:s.push(c.rendered);break;case Ye:{let u="<"+c.tagName;c.attributes.length>0&&(u+=" "+Jn(c.attributes).join(" ")),c.selfClosing&&(u+=" /"),u+=">",s.push(u);break}case vt:s.push(`</${c.tagName}>`);break;case Et:s.push(St(c.chars));break;case $n:s.push(`<!--${St(c.chars)}-->`);break;case qn:{let u=`<!DOCTYPE ${c.name}`;c.publicIdentifier&&(u+=` PUBLIC "${c.publicIdentifier}"`),c.systemIdentifier&&(u+=` "${c.systemIdentifier}"`),u+=">",s.push(u);break}}}return s.join("")}function Fn(e,t){const n=_n(e),o=[];for(let s=0;s<n.length;s++){const r=n[s];r.t==="nl"&&t.get("nl2br")?o.push({type:Ye,tagName:"br",attributes:[],selfClosing:!0}):!r.isLink||!t.check(r)?o.push({type:Et,chars:r.toString()}):o.push({type:Kt,rendered:t.render(r)})}return o}function Kn(e,t,n,o){let s=1;for(;n<t.length&&s>0;){let r=t[n];r.type===Ye&&r.tagName.toUpperCase()===e?s++:r.type===vt&&r.tagName.toUpperCase()===e&&s--,o.push(r),n++}return o}function vn(e){let{tagName:t,attributes:n,content:o}=e;return`<${t} ${Qn(n)}>${St(o)}</${t}>`}function St(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Qt(e){return e.replace(/"/g,"&quot;")}function Qn(e){const t=[];for(const n in e){const o=e[n]+"";t.push(`${n}="${Qt(o)}"`)}return t.join(" ")}function Jn(e){const t=[];for(let n=0;n<e.length;n++){const o=e[n][0],s=e[n][1]+"";t.push(`${o}="${Qt(s)}"`)}return t}const Gn=i.defineComponent({__name:"button",props:{button:{type:Object}},setup(e){const t=Q(),n=e;function o(){t.sendUserMessage(n.button.title)}return(s,r)=>(i.openBlock(),i.createElementBlock("button",{class:"tvk-btn tvk-btn-action",onClick:o},i.toDisplayString(n.button.title),1))}}),Yn=["href"],Xn=i.defineComponent({__name:"footnote",props:{footnote:{type:Object}},setup(e){const t=e;return(n,o)=>(i.openBlock(),i.createElementBlock("a",{class:"tvk-message-footnote",href:t.footnote.url,target:"_blank"},i.toDisplayString(t.footnote.title),9,Yn))}}),Zn={class:"tvk-message-footnotes"},es=i.defineComponent({__name:"footnotes",props:{footnotes:{type:Object}},setup(e){const t=x.getInstance().options,n=e;return(o,s)=>(i.openBlock(),i.createElementBlock("div",Zn,[i.createTextVNode(i.toDisplayString(i.unref(t).wording.messages.message.footnotes.sources)+" ",1),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.footnotes,r=>(i.openBlock(),i.createBlock(Xn,{footnote:r},null,8,["footnote"]))),256))]))}}),ts=["innerHTML"],ns=i.defineComponent({__name:"message-text",props:{message:{type:Object}},setup(e){x.getInstance().options;const t=e;function n(){return Wn(t.message.text,{target:"_blank"})}return(o,s)=>{var r;return i.openBlock(),i.createElementBlock(i.Fragment,null,[i.createElementVNode("div",{innerHTML:n()},null,8,ts),(r=t.message.footnotes)!=null&&r.length?(i.openBlock(),i.createBlock(es,{key:0,footnotes:t.message.footnotes},null,8,["footnotes"])):i.createCommentVNode("",!0),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(t.message.buttons,a=>(i.openBlock(),i.createBlock(Gn,{button:a},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(a.title),1)]),_:2},1032,["button"]))),256))],64)}}}),ss={class:"tvk-card"},is=["src","alt"],os={key:1},rs={key:2},as={key:3},Jt=i.defineComponent({__name:"message-card",props:{card:{type:Object}},setup(e){var r,a,c;const t=Q();x.getInstance().options;const n=e,o=((a=(r=n.card)==null?void 0:r.file)==null?void 0:a.description)??((c=n.card)==null?void 0:c.title);function s(u){n.card.file._loaded||(n.card.file._loaded=!0,t.scrollMessages())}return(u,h)=>{var g,m,d,f,y,k,C,E,A,b,w,N;return i.openBlock(),i.createElementBlock("div",ss,[(m=(g=n.card)==null?void 0:g.file)!=null&&m.url?(i.openBlock(),i.createElementBlock("img",{key:0,src:(f=(d=n.card)==null?void 0:d.file)==null?void 0:f.url,alt:i.unref(o),onLoad:s,class:"tvk-thumbnail"},null,40,is)):i.createCommentVNode("",!0),(y=n.card)!=null&&y.title?(i.openBlock(),i.createElementBlock("div",os,[i.createElementVNode("strong",null,i.toDisplayString((k=n.card)==null?void 0:k.title),1)])):i.createCommentVNode("",!0),(C=n.card)!=null&&C.subTitle?(i.openBlock(),i.createElementBlock("div",rs,i.toDisplayString((E=n.card)==null?void 0:E.subTitle),1)):i.createCommentVNode("",!0),(b=(A=n.card)==null?void 0:A.file)!=null&&b.description?(i.openBlock(),i.createElementBlock("div",as,i.toDisplayString((N=(w=n.card)==null?void 0:w.file)==null?void 0:N.description),1)):i.createCommentVNode("",!0)])}}}),Gt="transform 0.2s",cs=i.defineComponent({__name:"message-carousel",props:{carousel:{type:Object}},setup(e){const t=e,n=i.ref(t.carousel.cards),o=i.ref([]),s=i.ref(null),r=i.ref(null),a=i.ref({}),c=i.ref({}),u=i.ref(!1);function h(){var C;const k=(C=s.value)==null?void 0:C.offsetWidth;a.value={overflow:"hidden","max-width":`${k}px`}}function g(){return o.value.reduce((k,C)=>k+C.offsetWidth,0)}function m(){if(u.value)return;u.value=!0,h();const k=g(),C=n.value[0];n.value.push(C);const E=o.value[0];c.value={transition:Gt,transform:`translateX(-${E.offsetWidth}px)`,width:`${k+E.offsetWidth+1}px`},f(()=>{n.value.shift(),y(),u.value=!1})}function d(){if(u.value)return;u.value=!0,h();const k=g(),C=n.value[n.value.length-1];n.value.unshift(C);const E=o.value[o.value.length-1];c.value={transition:"none",transform:`translateX(-${E.offsetWidth}px)`,width:`${k+E.offsetWidth+1}px`},setTimeout(()=>{c.value={transition:Gt,transform:"translateX(0)",width:`${k+E.offsetWidth+1}px`},f(()=>{n.value.pop(),y(),u.value=!1})})}function f(k){var E;const C=()=>{var A;k(),(A=r.value)==null||A.removeEventListener("transitionend",C)};(E=r.value)==null||E.addEventListener("transitionend",C)}function y(){a.value={},c.value={transition:"none",transform:"translateX(0)"}}return(k,C)=>(i.openBlock(),i.createElementBlock(i.Fragment,null,[i.createElementVNode("div",{class:"tvk-carousel",ref_key:"carouselRef",ref:s,style:i.normalizeStyle(a.value)},[i.createElementVNode("div",{class:"tvk-carousel-inner",ref_key:"innerRef",ref:r,style:i.normalizeStyle(c.value)},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.value,E=>(i.openBlock(),i.createElementBlock("div",{class:"tvk-carousel-card",key:JSON.stringify(E),ref_for:!0,ref_key:"cardsRefs",ref:o},[i.createVNode(Jt,{card:E},null,8,["card"])]))),128))],4)],4),i.createElementVNode("div",{class:"tvk-carousel-controls"},[i.createElementVNode("button",{class:"tvk-btn",onClick:d}," prev "),i.createElementVNode("button",{class:"tvk-btn",onClick:m}," next ")])],64))}}),ls=i.defineComponent({__name:"message-image",props:{message:Object},setup(e){return x.getInstance().options,(t,n)=>"Image type not yet implemented"}}),us={key:0,class:"tvk-message-header"},fs={key:0,class:"tvk-message-header-avatar"},hs=["src"],ds=["src"],ms={key:1,class:"tvk-message-header-label"},ps={class:"tvk-message-header-label-user"},gs={class:"tvk-message-header-label-bot"},ys=i.createElementVNode("div",{class:"tvk-message-header-line-break"},null,-1),bs={key:1,class:"tvk-message-body"},ks={key:2,class:"tvk-message-body-from-app"},Ts={key:0,class:"tvk-message-loader"},Es=i.defineComponent({__name:"message",props:{message:{type:Object}},setup(e){const t=x.getInstance().options,n=e;return(o,s)=>n.message.author!==i.unref(D).user||!i.unref(t).preferences.messages.message.hideUserMessages?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(["tvk-message",{"tvk-message-user":n.message.author===i.unref(D).user,"tvk-message-bot":n.message.author===i.unref(D).bot}])},[i.unref(t).preferences.messages.message.header.display&&n.message.author!==i.unref(D).app?(i.openBlock(),i.createElementBlock("div",us,[i.unref(t).preferences.messages.message.header.avatar.display?(i.openBlock(),i.createElementBlock("div",fs,[!i.unref(t).preferences.messages.message.header.avatar.userImage&&i.unref(t).preferences.messages.message.header.avatar.userIcon&&n.message.author===i.unref(D).user?(i.openBlock(),i.createElementBlock("i",{key:0,class:i.normalizeClass(["tvk-message-header-avatar-user",i.unref(t).preferences.messages.message.header.avatar.userIcon])},null,2)):i.createCommentVNode("",!0),i.unref(t).preferences.messages.message.header.avatar.userImage&&n.message.author===i.unref(D).user?(i.openBlock(),i.createElementBlock("img",{key:1,src:i.unref(t).preferences.messages.message.header.avatar.userImage.src,style:i.normalizeStyle({width:i.unref(t).preferences.messages.message.header.avatar.userImage.width,height:i.unref(t).preferences.messages.message.header.avatar.userImage.height})},null,12,hs)):i.createCommentVNode("",!0),!i.unref(t).preferences.messages.message.header.avatar.botImage&&i.unref(t).preferences.messages.message.header.avatar.botIcon&&n.message.author===i.unref(D).bot?(i.openBlock(),i.createElementBlock("i",{key:2,class:i.normalizeClass(["tvk-message-header-avatar-bot",i.unref(t).preferences.messages.message.header.avatar.botIcon])},null,2)):i.createCommentVNode("",!0),i.unref(t).preferences.messages.message.header.avatar.botImage&&n.message.author===i.unref(D).bot?(i.openBlock(),i.createElementBlock("img",{key:3,src:i.unref(t).preferences.messages.message.header.avatar.botImage.src,style:i.normalizeStyle({width:i.unref(t).preferences.messages.message.header.avatar.botImage.width,height:i.unref(t).preferences.messages.message.header.avatar.botImage.height})},null,12,ds)):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),i.unref(t).preferences.messages.message.header.label.display?(i.openBlock(),i.createElementBlock("div",ms,[i.createElementVNode("span",ps,i.toDisplayString(i.unref(t).wording.messages.message.header.labelUser),1),i.createElementVNode("span",gs,i.toDisplayString(i.unref(t).wording.messages.message.header.labelBot),1)])):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),ys,n.message.author!==i.unref(D).app?(i.openBlock(),i.createElementBlock("div",bs,[n.message.type===i.unref(_).message?(i.openBlock(),i.createBlock(ns,{key:0,message:n.message},null,8,["message"])):i.createCommentVNode("",!0),n.message.type===i.unref(_).card?(i.openBlock(),i.createBlock(Jt,{key:1,card:n.message},null,8,["card"])):i.createCommentVNode("",!0),n.message.type===i.unref(_).carousel?(i.openBlock(),i.createBlock(cs,{key:2,carousel:n.message},null,8,["carousel"])):i.createCommentVNode("",!0),n.message.type===i.unref(_).image?(i.openBlock(),i.createBlock(ls,{key:3,message:n.message},null,8,["message"])):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),n.message.author===i.unref(D).app?(i.openBlock(),i.createElementBlock("div",ks,[n.message.type===i.unref(_).loader?(i.openBlock(),i.createElementBlock("div",Ts)):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0)],2)):i.createCommentVNode("",!0)}}),Ss=i.createElementVNode("div",{class:"tvk-shader tvk-shader-top"},null,-1),Cs=i.createElementVNode("div",{class:"tvk-shader tvk-shader-bottom"},null,-1),Ns=i.defineComponent({__name:"messages",setup(e){const t=Q(),n=i.ref();function o(){setTimeout(()=>{n.value.scrollTop=n.value.scrollHeight},100)}return i.onMounted(()=>{o()}),t.$onAction(({name:s,store:r,args:a,after:c})=>{s==="scrollMessages"&&c(()=>{setTimeout(()=>{o()})})}),(s,r)=>(i.openBlock(),i.createElementBlock("div",{ref_key:"messagesWrapper",ref:n,class:"tvk-messages"},[Ss,(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(i.unref(t).getMessages,a=>(i.openBlock(),i.createBlock(Es,{message:a},null,8,["message"]))),256)),Cs],512))}}),As={class:"tvk-wrapper"},Ds=i.defineComponent({__name:"App",setup(e){const t=x.getInstance().options,n=Q();return(o,s)=>(i.openBlock(),i.createElementBlock("main",As,[i.unref(n).getMessages.length||!i.unref(t).preferences.messages.hideIfNoMessages?(i.openBlock(),i.createBlock(Ns,{key:0})):i.createCommentVNode("",!0),i.createVNode(dn)]))}});function Is(){var t,n;const e=x.getInstance().options;if((t=e==null?void 0:e.initialization)!=null&&t.welcomeMessage||(n=e==null?void 0:e.initialization)!=null&&n.openingMessage){const o=Q(),s=o.getStoredState();(!s||!s.messages.length)&&(e.initialization.welcomeMessage&&o.addMessage({type:_.message,author:D.bot,date:Date.now(),text:e.initialization.welcomeMessage}),e.initialization.openingMessage&&o.sendUserMessage(e.initialization.openingMessage,!1))}}function Bs(e,t,n){const o=i.createApp(Ds);o.provide(_t,t),x.clearInstance(),x.getInstance(n);const s=Yt();return o.use(s),o.mount(e),Is(),o}function _s(){return JSON.parse(JSON.stringify(Lt))}function Ls(){return JSON.parse(JSON.stringify(x.getInstance().options))}O.getCurrentOptions=Ls,O.getDefaultOptions=_s,O.renderChat=Bs,Object.defineProperty(O,Symbol.toStringTag,{value:"Module"})});
