(function(_,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],s):(_=typeof globalThis<"u"?globalThis:_||self,s(_.TockVueKit={},_.Vue))})(this,function(_,s){"use strict";var Js=Object.defineProperty;var Ys=(_,s,te)=>s in _?Js(_,s,{enumerable:!0,configurable:!0,writable:!0,value:te}):_[s]=te;var Nt=(_,s,te)=>(Ys(_,typeof s!="symbol"?s+"":s,te),te);var te=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let At;const ge=e=>At=e,Dt=Symbol();function tt(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var le;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(le||(le={}));function rn(){const e=s.effectScope(!0),t=e.run(()=>s.ref({}));let n=[],i=[];const o=s.markRaw({install(r){ge(o),o._a=r,r.provide(Dt,o),r.config.globalProperties.$pinia=o,i.forEach(a=>n.push(a)),i=[]},use(r){return!this._a&&!te?i.push(r):n.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const _t=()=>{};function It(e,t,n,i=_t){e.push(t);const o=()=>{const r=e.indexOf(t);r>-1&&(e.splice(r,1),i())};return!n&&s.getCurrentScope()&&s.onScopeDispose(o),o}function oe(e,...t){e.slice().forEach(n=>{n(...t)})}const an=e=>e();function nt(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,i)=>e.set(i,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n],o=e[n];tt(o)&&tt(i)&&e.hasOwnProperty(n)&&!s.isRef(i)&&!s.isReactive(i)?e[n]=nt(o,i):e[n]=i}return e}const cn=Symbol();function ln(e){return!tt(e)||!e.hasOwnProperty(cn)}const{assign:J}=Object;function un(e){return!!(s.isRef(e)&&e.effect)}function dn(e,t,n,i){const{state:o,actions:r,getters:a}=t,c=n.state.value[e];let u;function d(){c||(n.state.value[e]=o?o():{});const g=s.toRefs(n.state.value[e]);return J(g,r,Object.keys(a||{}).reduce((h,f)=>(h[f]=s.markRaw(s.computed(()=>{ge(n);const C=n._s.get(e);return a[f].call(C,C)})),h),{}))}return u=wt(e,d,t,n,i,!0),u}function wt(e,t,n={},i,o,r){let a;const c=J({actions:{}},n),u={deep:!0};let d,g,h=[],f=[],C;const b=i.state.value[e];!r&&!b&&(i.state.value[e]={}),s.ref({});let m;function S(k){let T;d=g=!1,typeof k=="function"?(k(i.state.value[e]),T={type:le.patchFunction,storeId:e,events:C}):(nt(i.state.value[e],k),T={type:le.patchObject,payload:k,storeId:e,events:C});const H=m=Symbol();s.nextTick().then(()=>{m===H&&(d=!0)}),g=!0,oe(h,T,i.state.value[e])}const E=r?function(){const{state:T}=n,H=T?T():{};this.$patch(V=>{J(V,H)})}:_t;function I(){a.stop(),h=[],f=[],i._s.delete(e)}function w(k,T){return function(){ge(i);const H=Array.from(arguments),V=[],$=[];function ee(x){V.push(x)}function se(x){$.push(x)}oe(f,{args:H,name:k,store:D,after:ee,onError:se});let G;try{G=T.apply(this&&this.$id===e?this:D,H)}catch(x){throw oe($,x),x}return G instanceof Promise?G.then(x=>(oe(V,x),x)).catch(x=>(oe($,x),Promise.reject(x))):(oe(V,G),G)}}const j={_p:i,$id:e,$onAction:It.bind(null,f),$patch:S,$reset:E,$subscribe(k,T={}){const H=It(h,k,T.detached,()=>V()),V=a.run(()=>s.watch(()=>i.state.value[e],$=>{(T.flush==="sync"?g:d)&&k({storeId:e,type:le.direct,events:C},$)},J({},u,T)));return H},$dispose:I},D=s.reactive(j);i._s.set(e,D);const N=(i._a&&i._a.runWithContext||an)(()=>i._e.run(()=>(a=s.effectScope()).run(t)));for(const k in N){const T=N[k];if(s.isRef(T)&&!un(T)||s.isReactive(T))r||(b&&ln(T)&&(s.isRef(T)?T.value=b[k]:nt(T,b[k])),i.state.value[e][k]=T);else if(typeof T=="function"){const H=w(k,T);N[k]=H,c.actions[k]=T}}return J(D,N),J(s.toRaw(D),N),Object.defineProperty(D,"$state",{get:()=>i.state.value[e],set:k=>{S(T=>{J(T,k)})}}),i._p.forEach(k=>{J(D,a.run(()=>k({store:D,app:i._a,pinia:i,options:c})))}),b&&r&&n.hydrate&&n.hydrate(D.$state,b),d=!0,g=!0,D}function fn(e,t,n){let i,o;const r=typeof t=="function";typeof e=="string"?(i=e,o=r?n:t):(o=e,i=e.id);function a(c,u){const d=s.hasInjectionContext();return c=c||(d?s.inject(Dt,null):null),c&&ge(c),c=At,c._s.has(i)||(r?wt(i,t,o,c):dn(i,o,c)),c._s.get(i)}return a.$id=i,a}function hn(){const e=Date.now().toString(36),t=Math.random().toString(36).substr(2,5);return(e+t).toUpperCase()}const xt=Symbol("tockEndpointKey");var A=(e=>(e.bot="bot",e.user="user",e.app="app",e))(A||{}),B=(e=>(e.message="message",e.card="card",e.carousel="carousel",e.image="image",e.loader="loader",e.error="error",e))(B||{}),Bt=(e=>(e.web_url="web_url",e.postback="postback",e.quick_reply="quick_reply",e))(Bt||{});function ye(e){return!!(e&&typeof e=="object"&&!Array.isArray(e))}function st(e,...t){if(!t.length)return e;const n=t.shift();if(ye(e)&&ye(n))for(const i in n)ye(n[i])?(e[i]||Object.assign(e,{[i]:{}}),st(e[i],n[i])):Object.assign(e,{[i]:n[i]});return st(e,...t)}const Ot={localStorage:{enabled:{title:"Local storage",type:"boolean",default:!1,description:"Retain conversation history in local storage",index:1},prefix:{title:"Local storage prefix",type:"string",default:void 0,description:"Prefix for local storage keys allowing communication with different bots from the same domain",index:1.1,conditions:["localStorage.enabled"]},maxNumberMessages:{title:"Maximum messages",type:"number",default:20,description:"Maximum number of messages to store in local storage",index:2,conditions:["localStorage.enabled"]}},initialization:{extraHeaders:{title:"Extra headers",type:"KeyValues",default:void 0,description:"Additional HTTP header key/value pairs to be supplied in requests. Warning : Tock server configuration required.",index:1},welcomeMessage:{title:"Welcome message",type:"string",default:void 0,description:"Initial bot message to be displayed to the user at startup. It will not be sent to the bot and will be stored in local storage, if any.",index:2},openingMessage:{title:"Opening message",type:"string",default:void 0,description:"Initial user message to be sent to the bot at startup to trigger a welcome sequence. It will not be displayed to the user and will not be stored in local storage, if any.",index:3}},preferences:{messages:{hideIfNoMessages:{title:"Hide messages if no messages",type:"boolean",default:!0,description:"Hide messages container if there is no messages to display.",index:20},clearOnNewRequest:{title:"Clear on new request",type:"boolean",default:!1,description:"If true, deletes previous messages when a new user request is sent",index:21},message:{hideUserMessages:{title:"Hide user messages",type:"boolean",default:!1,description:"If true, user messages are not displayed.",index:22},header:{display:{title:"Display header",type:"boolean",default:!0,description:"Display a header above message.",index:1},avatar:{display:{title:"Display header avatar",type:"boolean",default:!0,description:"Display an avatar in message header.",index:3,conditions:["preferences.messages.message.header.display"]},userIcon:{title:"Avatar User icon",type:"string",default:"bi bi-person-fill",description:"Class name of the user avatar icon (displayed only if User image is not defined).",index:3.1,conditions:["preferences.messages.message.header.display"]},userImage:{title:"Avatar User image",type:"ImageDef",default:void 0,description:"Image of the user avatar",index:3.2,conditions:["preferences.messages.message.header.display"]},botIcon:{title:"Avatar Bot icon",type:"string",default:"bi bi-robot",description:"Class name of the bot avatar icon (displayed only if Bot image is not defined).",index:3.3,conditions:["preferences.messages.message.header.display"]},botImage:{title:"Avatar Bot image",type:"ImageDef",default:void 0,description:"Image of the bot avatar",index:3.4,conditions:["preferences.messages.message.header.display"]}},label:{display:{title:"Display header label",type:"boolean",default:!0,description:"Display a label in message header (cf wording.messages.message.header.labelUser and wording.messages.message.header.labelBot for textual content).",index:2,conditions:["preferences.messages.message.header.display"]}}}},footNotes:{display:{title:"Display sources",type:"boolean",default:!0,description:"For RAG answers, display the sources used to generate the answer if any.",index:50},requireSourcesContent:{title:"Request textual content of sources",type:"boolean",default:!1,description:"For RAG answers, request the textual content of the source in addition to the source title and link.",index:51,conditions:["preferences.messages.footNotes.display"]},clampSourceContent:{title:"Clamp content of sources",type:"boolean",default:!0,description:"For RAG answers with sources content, truncate the textual source content.",index:52,conditions:["preferences.messages.footNotes.display","preferences.messages.footNotes.requireSourcesContent"]},clampSourceContentNbLines:{title:"Number of lines to clamp",type:"number",default:2,description:"For RAG answers with sources content, number of lines after which to truncate text.",index:53,conditions:["preferences.messages.footNotes.display","preferences.messages.footNotes.requireSourcesContent","preferences.messages.footNotes.clampSourceContent"]},displayOnMessageSide:{title:"Display sources on the side of the answer",type:"boolean",default:!1,description:"For RAG responses, any sources are displayed on one side of the message response rather than directly following the response.",index:54,conditions:["preferences.messages.footNotes.display"]}}},questionBar:{clearTypedCharsOnSubmit:{title:"Clear input on submit",type:"boolean",default:!0,description:"Whether or not the question input should be cleared on submit.",index:60},maxUserInputLength:{title:"Max user message length",type:"number",default:500,description:"Max length of the user input message string",index:61},clearHistory:{display:{title:"Show clear history button",type:"boolean",default:!0,description:"Display the control allowing user to clear discussion history and local storage history, if any",index:70},icon:{title:"Clear history button icon",type:"string",default:"bi bi-trash-fill",description:"Class name of the clear history control icon (displayed only if no image is defined)",index:71,conditions:["preferences.questionBar.clearHistory.display"]},image:{title:"Clear history button image",type:"ImageDef",default:void 0,description:"Image of the clearHistory control",index:72,conditions:["preferences.questionBar.clearHistory.display"]}},submit:{icon:{title:"Submit button icon",type:"string",default:"bi bi-send-fill",description:"Class name of the submit control icon (displayed only if no image is defined)",index:80},image:{title:"Submit button image",type:"ImageDef",default:void 0,description:"Image of the submit control",index:81}}}},wording:{messages:{message:{header:{labelUser:{title:"Message header user label",type:"string",default:"You",description:void 0},labelBot:{title:"Message header bot label",type:"string",default:"Bot",description:void 0}},footnotes:{sources:{title:"Footnotes label",type:"string",default:"Sources:",description:void 0},showMoreLink:{title:"Show more link label",type:"string",default:"> Show more",description:void 0}}}},questionBar:{clearHistory:{title:"Clear history button label",type:"string",default:"",description:void 0},clearHistoryAriaLabel:{title:"Clear history button Aria label",type:"string",default:"Clear discussion and history button",description:void 0},input:{placeholder:{title:"User input placeholder",type:"string",default:"Ask me a question...",description:void 0}},submit:{title:"Submit button label",type:"string",default:"",description:void 0},submitAriaLabel:{title:"Submit button Aria label",type:"string",default:"Submit button",description:void 0}},connectionErrorMessage:{title:"Connection error message",type:"string",default:"An unexpected error occured. Please try again later.",description:void 0}}};function pn(e){return"type"in e&&"default"in e&&"title"in e&&"description"in e}function Lt(e,t={}){if(ye(e)){if(pn(e))return e.default;{const n=Object.entries(e);for(let i=0;i<n.length;i++){const[o,r]=n[i];t[o]=Lt(r)}return t}}}const Q=class Q{constructor(t){Nt(this,"options");const n=Lt(Ot);this.options=st(n,t)}static clearInstance(){Q.instance&&(Q.instance=void 0)}static setOptions(t){Q.instance=new Q(t)}static getOptions(){if(!Q.instance)throw new Error("No TVK instance avalaible.");return Q.instance.options}};Nt(Q,"instance");let L=Q;const mn="main",Rt="main_storage",gn=()=>({userId:hn(),messages:[]}),U=fn(mn,()=>{const e=s.inject(xt),t=L.getOptions(),n=s.ref(o());function i(){}function o(){if(t.localStorage.enabled){const m=r();if(m)return m}return gn()}function r(){if(!t.localStorage.enabled)return!1;const m=localStorage.getItem(a());return m?JSON.parse(m):!1}function a(){let m=Rt;return t.localStorage.prefix&&(m=`${Rt}_${t.localStorage.prefix}`),m}const c=s.computed(()=>n.value.messages);function u(){n.value.messages=n.value.messages.filter(m=>m.type!==B.loader)}function d(){}function g(m){const S=U();S.clearLoaderMessages(),S.scrollMessages(),n.value.messages.push(m)}function h(){const m=new Headers({"Content-Type":"application/json"});return t.initialization.extraHeaders&&Object.entries(t.initialization.extraHeaders).forEach(S=>{m.append(S[0],S[1])}),m}function f(){U().addMessage({type:B.error,author:A.app,date:Date.now(),text:t.wording.connectionErrorMessage})}async function C(m,S=!0){const E=U();t.preferences.messages.clearOnNewRequest&&(n.value.messages=[]),S&&E.addMessage({type:B.message,author:A.user,text:m,date:Date.now()}),E.addMessage({type:B.loader,author:A.app,date:Date.now()});const I=navigator.language,w={query:m,userId:n.value.userId,locale:I,sourceWithContent:t.preferences.messages.footNotes.requireSourcesContent};let j;try{j=await fetch(e,{method:"post",body:JSON.stringify(w),headers:h()})}catch(y){console.log(y),f();return}if(!j.ok){console.log(j),f();return}let D;try{D=await j.json()}catch(y){console.log(y),f();return}if(E.clearLoaderMessages(),D.responses.forEach(y=>{delete y.type,delete y.version,"text"in y?E.addMessage({type:B.message,author:A.bot,date:Date.now(),...y}):"card"in y?E.addMessage({type:B.card,author:A.bot,date:Date.now(),...y.card}):"image"in y?E.addMessage({type:B.image,author:A.bot,date:Date.now(),...y.image}):"carousel"in y&&E.addMessage({type:B.carousel,author:A.bot,date:Date.now(),...y.carousel})}),t.localStorage.enabled){let y=JSON.stringify(n.value);if(t.localStorage.maxNumberMessages&&n.value.messages.length>t.localStorage.maxNumberMessages){const N=JSON.parse(y),k=N.messages.length-parseInt(t.localStorage.maxNumberMessages);k&&(N.messages=N.messages.slice(k,N.messages.length+1)),y=JSON.stringify(N)}localStorage.setItem(a(),y)}}function b(){n.value.messages=[],t.localStorage.enabled&&localStorage.setItem(a(),JSON.stringify(n.value))}return{state:n,updateApplication:i,getStoredState:r,getMessages:c,sendUserMessage:C,addMessage:g,clearHistory:b,clearLoaderMessages:u,scrollMessages:d}}),yn=["aria-label"],bn=["src"],kn=["maxlength","placeholder"],Tn={class:"tvk-question-bar-chars-count"},En=["disabled","aria-label"],Sn=["src"],Cn=s.defineComponent({__name:"question-block",setup(e){const t=L.getOptions(),n=U(),i=t.preferences.questionBar.maxUserInputLength,o=s.ref(null),r=s.ref("");function a(){o!=null&&o.value&&o.value.focus()}function c(){return r.value.trim().length}function u(){return c()>i}function d(){c()&&!u()&&(n.sendUserMessage(r.value),t.preferences.questionBar.clearTypedCharsOnSubmit&&(r.value=""))}function g(){n.clearHistory()}return(h,f)=>{var C;return s.openBlock(),s.createElementBlock("div",{class:"tvk-question-bar",onClick:a},[(C=s.unref(t).preferences.questionBar.clearHistory)!=null&&C.display?(s.openBlock(),s.createElementBlock("button",{key:0,class:"tvk-btn tvk-question-bar-btn-clear-history","aria-label":s.unref(t).wording.questionBar.clearHistoryAriaLabel,onClick:g},[!s.unref(t).preferences.questionBar.clearHistory.image&&s.unref(t).preferences.questionBar.clearHistory.icon?(s.openBlock(),s.createElementBlock("i",{key:0,class:s.normalizeClass(s.unref(t).preferences.questionBar.clearHistory.icon)},null,2)):s.createCommentVNode("",!0),s.unref(t).preferences.questionBar.clearHistory.image?(s.openBlock(),s.createElementBlock("img",{key:1,src:s.unref(t).preferences.questionBar.clearHistory.image.src,style:s.normalizeStyle({width:s.unref(t).preferences.questionBar.clearHistory.image.width,height:s.unref(t).preferences.questionBar.clearHistory.image.height})},null,12,bn)):s.createCommentVNode("",!0),s.createTextVNode(" "+s.toDisplayString(s.unref(t).wording.questionBar.clearHistory),1)],8,yn)):s.createCommentVNode("",!0),s.createElementVNode("form",{onSubmit:s.withModifiers(d,["prevent"]),class:"tvk-question-bar-form"},[s.withDirectives(s.createElementVNode("input",{ref_key:"input",ref:o,type:"text",class:"tvk-question-bar-input",rows:"1",maxlength:s.unref(t).preferences.questionBar.maxUserInputLength,placeholder:s.unref(t).wording.questionBar.input.placeholder,"onUpdate:modelValue":f[0]||(f[0]=b=>r.value=b)},null,8,kn),[[s.vModelText,r.value]]),s.createElementVNode("div",Tn,s.toDisplayString(c())+"/"+s.toDisplayString(s.unref(i)),1)],32),s.createElementVNode("button",{disabled:!r.value.trim().length||u(),class:"tvk-btn tvk-question-bar-btn-submit","aria-label":s.unref(t).wording.questionBar.submitAriaLabel,onClick:d},[!s.unref(t).preferences.questionBar.submit.image&&s.unref(t).preferences.questionBar.submit.icon?(s.openBlock(),s.createElementBlock("i",{key:0,class:s.normalizeClass(s.unref(t).preferences.questionBar.submit.icon)},null,2)):s.createCommentVNode("",!0),s.unref(t).preferences.questionBar.submit.image?(s.openBlock(),s.createElementBlock("img",{key:1,src:s.unref(t).preferences.questionBar.submit.image.src,style:s.normalizeStyle({width:s.unref(t).preferences.questionBar.submit.image.width,height:s.unref(t).preferences.questionBar.submit.image.height})},null,12,Sn)):s.createCommentVNode("",!0),s.createTextVNode(" "+s.toDisplayString(s.unref(t).wording.questionBar.submit),1)],8,En)])}}}),Nn="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",An="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",ie=(e,t)=>{for(const n in t)e[n]=t[n];return e},ot="numeric",it="ascii",rt="alpha",be="asciinumeric",ke="alphanumeric",at="domain",Ht="emoji",Dn="scheme",_n="slashscheme",Vt="whitespace";function In(e,t){return e in t||(t[e]=[]),t[e]}function ne(e,t,n){t[ot]&&(t[be]=!0,t[ke]=!0),t[it]&&(t[be]=!0,t[rt]=!0),t[be]&&(t[ke]=!0),t[rt]&&(t[ke]=!0),t[ke]&&(t[at]=!0),t[Ht]&&(t[at]=!0);for(const i in t){const o=In(i,n);o.indexOf(e)<0&&o.push(e)}}function wn(e,t){const n={};for(const i in t)t[i].indexOf(e)>=0&&(n[i]=!0);return n}function P(e){e===void 0&&(e=null),this.j={},this.jr=[],this.jd=null,this.t=e}P.groups={},P.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let i=0;i<t.jr.length;i++){const o=t.jr[i][0],r=t.jr[i][1];if(r&&o.test(e))return r}return t.jd},has(e,t){return t===void 0&&(t=!1),t?e in this.j:!!this.go(e)},ta(e,t,n,i){for(let o=0;o<e.length;o++)this.tt(e[o],t,n,i)},tr(e,t,n,i){i=i||P.groups;let o;return t&&t.j?o=t:(o=new P(t),n&&i&&ne(t,n,i)),this.jr.push([e,o]),o},ts(e,t,n,i){let o=this;const r=e.length;if(!r)return o;for(let a=0;a<r-1;a++)o=o.tt(e[a]);return o.tt(e[r-1],t,n,i)},tt(e,t,n,i){i=i||P.groups;const o=this;if(t&&t.j)return o.j[e]=t,t;const r=t;let a,c=o.go(e);if(c?(a=new P,ie(a.j,c.j),a.jr.push.apply(a.jr,c.jr),a.jd=c.jd,a.t=c.t):a=new P,r){if(i)if(a.t&&typeof a.t=="string"){const u=ie(wn(a.t,i),n);ne(r,u,i)}else n&&ne(r,n,i);a.t=r}return o.j[e]=a,a}};const p=(e,t,n,i,o)=>e.ta(t,n,i,o),M=(e,t,n,i,o)=>e.tr(t,n,i,o),Pt=(e,t,n,i,o)=>e.ts(t,n,i,o),l=(e,t,n,i,o)=>e.tt(t,n,i,o),v="WORD",ct="UWORD",ue="LOCALHOST",lt="TLD",ut="UTLD",Te="SCHEME",re="SLASH_SCHEME",dt="NUM",Mt="WS",ft="NL",de="OPENBRACE",fe="CLOSEBRACE",Ee="OPENBRACKET",Se="CLOSEBRACKET",Ce="OPENPAREN",Ne="CLOSEPAREN",Ae="OPENANGLEBRACKET",De="CLOSEANGLEBRACKET",_e="FULLWIDTHLEFTPAREN",Ie="FULLWIDTHRIGHTPAREN",we="LEFTCORNERBRACKET",xe="RIGHTCORNERBRACKET",Be="LEFTWHITECORNERBRACKET",Oe="RIGHTWHITECORNERBRACKET",Le="FULLWIDTHLESSTHAN",Re="FULLWIDTHGREATERTHAN",He="AMPERSAND",Ve="APOSTROPHE",Pe="ASTERISK",Y="AT",Me="BACKSLASH",ze="BACKTICK",Ue="CARET",X="COLON",ht="COMMA",je="DOLLAR",q="DOT",$e="EQUALS",pt="EXCLAMATION",F="HYPHEN",qe="PERCENT",Fe="PIPE",We="PLUS",ve="POUND",Ke="QUERY",mt="QUOTE",gt="SEMI",W="SLASH",he="TILDE",Qe="UNDERSCORE",zt="EMOJI",Ge="SYM";var Ut=Object.freeze({__proto__:null,WORD:v,UWORD:ct,LOCALHOST:ue,TLD:lt,UTLD:ut,SCHEME:Te,SLASH_SCHEME:re,NUM:dt,WS:Mt,NL:ft,OPENBRACE:de,CLOSEBRACE:fe,OPENBRACKET:Ee,CLOSEBRACKET:Se,OPENPAREN:Ce,CLOSEPAREN:Ne,OPENANGLEBRACKET:Ae,CLOSEANGLEBRACKET:De,FULLWIDTHLEFTPAREN:_e,FULLWIDTHRIGHTPAREN:Ie,LEFTCORNERBRACKET:we,RIGHTCORNERBRACKET:xe,LEFTWHITECORNERBRACKET:Be,RIGHTWHITECORNERBRACKET:Oe,FULLWIDTHLESSTHAN:Le,FULLWIDTHGREATERTHAN:Re,AMPERSAND:He,APOSTROPHE:Ve,ASTERISK:Pe,AT:Y,BACKSLASH:Me,BACKTICK:ze,CARET:Ue,COLON:X,COMMA:ht,DOLLAR:je,DOT:q,EQUALS:$e,EXCLAMATION:pt,HYPHEN:F,PERCENT:qe,PIPE:Fe,PLUS:We,POUND:ve,QUERY:Ke,QUOTE:mt,SEMI:gt,SLASH:W,TILDE:he,UNDERSCORE:Qe,EMOJI:zt,SYM:Ge});const ae=/[a-z]/,yt=new RegExp("\\p{L}","u"),bt=new RegExp("\\p{Emoji}","u"),kt=/\d/,jt=/\s/,$t=`
`,xn="️",Bn="‍";let Je=null,Ye=null;function On(e){e===void 0&&(e=[]);const t={};P.groups=t;const n=new P;Je==null&&(Je=qt(Nn)),Ye==null&&(Ye=qt(An)),l(n,"'",Ve),l(n,"{",de),l(n,"}",fe),l(n,"[",Ee),l(n,"]",Se),l(n,"(",Ce),l(n,")",Ne),l(n,"<",Ae),l(n,">",De),l(n,"（",_e),l(n,"）",Ie),l(n,"「",we),l(n,"」",xe),l(n,"『",Be),l(n,"』",Oe),l(n,"＜",Le),l(n,"＞",Re),l(n,"&",He),l(n,"*",Pe),l(n,"@",Y),l(n,"`",ze),l(n,"^",Ue),l(n,":",X),l(n,",",ht),l(n,"$",je),l(n,".",q),l(n,"=",$e),l(n,"!",pt),l(n,"-",F),l(n,"%",qe),l(n,"|",Fe),l(n,"+",We),l(n,"#",ve),l(n,"?",Ke),l(n,'"',mt),l(n,"/",W),l(n,";",gt),l(n,"~",he),l(n,"_",Qe),l(n,"\\",Me);const i=M(n,kt,dt,{[ot]:!0});M(i,kt,i);const o=M(n,ae,v,{[it]:!0});M(o,ae,o);const r=M(n,yt,ct,{[rt]:!0});M(r,ae),M(r,yt,r);const a=M(n,jt,Mt,{[Vt]:!0});l(n,$t,ft,{[Vt]:!0}),l(a,$t),M(a,jt,a);const c=M(n,bt,zt,{[Ht]:!0});M(c,bt,c),l(c,xn,c);const u=l(c,Bn);M(u,bt,c);const d=[[ae,o]],g=[[ae,null],[yt,r]];for(let h=0;h<Je.length;h++)Z(n,Je[h],lt,v,d);for(let h=0;h<Ye.length;h++)Z(n,Ye[h],ut,ct,g);ne(lt,{tld:!0,ascii:!0},t),ne(ut,{utld:!0,alpha:!0},t),Z(n,"file",Te,v,d),Z(n,"mailto",Te,v,d),Z(n,"http",re,v,d),Z(n,"https",re,v,d),Z(n,"ftp",re,v,d),Z(n,"ftps",re,v,d),ne(Te,{scheme:!0,ascii:!0},t),ne(re,{slashscheme:!0,ascii:!0},t),e=e.sort((h,f)=>h[0]>f[0]?1:-1);for(let h=0;h<e.length;h++){const f=e[h][0],b=e[h][1]?{[Dn]:!0}:{[_n]:!0};f.indexOf("-")>=0?b[at]=!0:ae.test(f)?kt.test(f)?b[be]=!0:b[it]=!0:b[ot]=!0,Pt(n,f,f,b)}return Pt(n,"localhost",ue,{ascii:!0}),n.jd=new P(Ge),{start:n,tokens:ie({groups:t},Ut)}}function Ln(e,t){const n=Rn(t.replace(/[A-Z]/g,c=>c.toLowerCase())),i=n.length,o=[];let r=0,a=0;for(;a<i;){let c=e,u=null,d=0,g=null,h=-1,f=-1;for(;a<i&&(u=c.go(n[a]));)c=u,c.accepts()?(h=0,f=0,g=c):h>=0&&(h+=n[a].length,f++),d+=n[a].length,r+=n[a].length,a++;r-=h,a-=f,d-=h,o.push({t:g.t,v:t.slice(r-d,r),s:r-d,e:r})}return o}function Rn(e){const t=[],n=e.length;let i=0;for(;i<n;){let o=e.charCodeAt(i),r,a=o<55296||o>56319||i+1===n||(r=e.charCodeAt(i+1))<56320||r>57343?e[i]:e.slice(i,i+2);t.push(a),i+=a.length}return t}function Z(e,t,n,i,o){let r;const a=t.length;for(let c=0;c<a-1;c++){const u=t[c];e.j[u]?r=e.j[u]:(r=new P(i),r.jr=o.slice(),e.j[u]=r),e=r}return r=new P(n),r.jr=o.slice(),e.j[t[a-1]]=r,r}function qt(e){const t=[],n=[];let i=0,o="0123456789";for(;i<e.length;){let r=0;for(;o.indexOf(e[i+r])>=0;)r++;if(r>0){t.push(n.join(""));for(let a=parseInt(e.substring(i,i+r),10);a>0;a--)n.pop();i+=r}else n.push(e[i]),i++}return t}const pe={defaultProtocol:"http",events:null,format:Ft,formatHref:Ft,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Tt(e,t){t===void 0&&(t=null);let n=ie({},pe);e&&(n=ie(n,e instanceof Tt?e.o:e));const i=n.ignoreTags,o=[];for(let r=0;r<i.length;r++)o.push(i[r].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=o}Tt.prototype={o:pe,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const i=t!=null;let o=this.o[e];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:pe[e],typeof o=="function"&&i&&(o=o(t,n))):typeof o=="function"&&i&&(o=o(t,n.t,n)),o)},getObj(e,t,n){let i=this.o[e];return typeof i=="function"&&t!=null&&(i=i(t,n.t,n)),i},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function Ft(e){return e}function Wt(e,t){this.t="token",this.v=e,this.tk=t}Wt.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),i=e.get("format",t,this);return n&&i.length>n?i.substring(0,n)+"…":i},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e){return e===void 0&&(e=pe.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),i=e.get("formatHref",n,this),o=e.get("tagName",n,t),r=this.toFormattedString(e),a={},c=e.get("className",n,t),u=e.get("target",n,t),d=e.get("rel",n,t),g=e.getObj("attributes",n,t),h=e.getObj("events",n,t);return a.href=i,c&&(a.class=c),u&&(a.target=u),d&&(a.rel=d),g&&ie(a,g),{tagName:o,attributes:a,content:r,eventListeners:h}}};function Xe(e,t){class n extends Wt{constructor(o,r){super(o,r),this.t=e}}for(const i in t)n.prototype[i]=t[i];return n.t=e,n}const vt=Xe("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Kt=Xe("text"),Hn=Xe("nl"),Ze=Xe("url",{isLink:!0,toHref(e){return e===void 0&&(e=pe.defaultProtocol),this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==ue&&e[1].t===X}}),z=e=>new P(e);function Vn(e){let{groups:t}=e;const n=t.domain.concat([He,Pe,Y,Me,ze,Ue,je,$e,F,dt,qe,Fe,We,ve,W,Ge,he,Qe]),i=[Ve,X,ht,q,pt,Ke,mt,gt,Ae,De,de,fe,Se,Ee,Ce,Ne,_e,Ie,we,xe,Be,Oe,Le,Re],o=[He,Ve,Pe,Me,ze,Ue,je,$e,F,de,fe,qe,Fe,We,ve,Ke,W,Ge,he,Qe],r=z(),a=l(r,he);p(a,o,a),p(a,t.domain,a);const c=z(),u=z(),d=z();p(r,t.domain,c),p(r,t.scheme,u),p(r,t.slashscheme,d),p(c,o,a),p(c,t.domain,c);const g=l(c,Y);l(a,Y,g),l(u,Y,g),l(d,Y,g);const h=l(a,q);p(h,o,a),p(h,t.domain,a);const f=z();p(g,t.domain,f),p(f,t.domain,f);const C=l(f,q);p(C,t.domain,f);const b=z(vt);p(C,t.tld,b),p(C,t.utld,b),l(g,ue,b);const m=l(f,F);p(m,t.domain,f),p(b,t.domain,f),l(b,q,C),l(b,F,m);const S=l(b,X);p(S,t.numeric,vt);const E=l(c,F),I=l(c,q);p(E,t.domain,c),p(I,o,a),p(I,t.domain,c);const w=z(Ze);p(I,t.tld,w),p(I,t.utld,w),p(w,t.domain,c),p(w,o,a),l(w,q,I),l(w,F,E),l(w,Y,g);const j=l(w,X),D=z(Ze);p(j,t.numeric,D);const y=z(Ze),N=z();p(y,n,y),p(y,i,N),p(N,n,y),p(N,i,N),l(w,W,y),l(D,W,y);const k=l(u,X),T=l(d,X),H=l(T,W),V=l(H,W);p(u,t.domain,c),l(u,q,I),l(u,F,E),p(d,t.domain,c),l(d,q,I),l(d,F,E),p(k,t.domain,y),l(k,W,y),p(V,t.domain,y),p(V,n,y),l(V,W,y);const $=[[de,fe],[Ee,Se],[Ce,Ne],[Ae,De],[_e,Ie],[we,xe],[Be,Oe],[Le,Re]];for(let ee=0;ee<$.length;ee++){const[se,G]=$[ee],x=l(y,se);l(N,se,x),l(x,G,y);const ce=z(Ze);p(x,n,ce);const me=z();p(x,i),p(ce,n,ce),p(ce,i,me),p(me,n,ce),p(me,i,me),l(ce,G,y),l(me,G,y)}return l(r,ue,w),l(r,ft,Hn),{start:r,tokens:Ut}}function Pn(e,t,n){let i=n.length,o=0,r=[],a=[];for(;o<i;){let c=e,u=null,d=null,g=0,h=null,f=-1;for(;o<i&&!(u=c.go(n[o].t));)a.push(n[o++]);for(;o<i&&(d=u||c.go(n[o].t));)u=null,c=d,c.accepts()?(f=0,h=c):f>=0&&f++,o++,g++;if(f<0)o-=g,o<i&&(a.push(n[o]),o++);else{a.length>0&&(r.push(Et(Kt,t,a)),a=[]),o-=f,g-=f;const C=h.t,b=n.slice(o-g,o);r.push(Et(C,t,b))}}return a.length>0&&r.push(Et(Kt,t,a)),r}function Et(e,t,n){const i=n[0].s,o=n[n.length-1].e,r=t.slice(i,o);return new e(r,n)}const R={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Mn(){R.scanner=On(R.customSchemes);for(let e=0;e<R.tokenQueue.length;e++)R.tokenQueue[e][1]({scanner:R.scanner});R.parser=Vn(R.scanner.tokens);for(let e=0;e<R.pluginQueue.length;e++)R.pluginQueue[e][1]({scanner:R.scanner,parser:R.parser});R.initialized=!0}function zn(e){return R.initialized||Mn(),Pn(R.parser.start,e,Ln(R.scanner.start,e))}var Un={amp:"&",gt:">",lt:"<",nbsp:" ",quot:'"'},jn=/^#[xX]([A-Fa-f0-9]+)$/,$n=/^#([0-9]+)$/,qn=/^([A-Za-z0-9]+)$/,Fn=function(){function e(t){this.named=t}return e.prototype.parse=function(t){if(t){var n=t.match(jn);if(n)return String.fromCharCode(parseInt(n[1],16));if(n=t.match($n),n)return String.fromCharCode(parseInt(n[1],10));if(n=t.match(qn),n)return this.named[n[1]]||"&"+n[1]+";"}},e}(),Wn=/[\t\n\f ]/,vn=/[A-Za-z]/,Kn=/\r\n?/g;function O(e){return Wn.test(e)}function Qt(e){return vn.test(e)}function Qn(e){return e.replace(Kn,`
`)}var Gn=function(){function e(t,n,i){i===void 0&&(i="precompile"),this.delegate=t,this.entityParser=n,this.mode=i,this.state="beforeData",this.line=-1,this.column=-1,this.input="",this.index=-1,this.tagNameBuffer="",this.states={beforeData:function(){var o=this.peek();if(o==="<"&&!this.isIgnoredEndTag())this.transitionTo("tagOpen"),this.markTagStart(),this.consume();else{if(this.mode==="precompile"&&o===`
`){var r=this.tagNameBuffer.toLowerCase();(r==="pre"||r==="textarea")&&this.consume()}this.transitionTo("data"),this.delegate.beginData()}},data:function(){var o=this.peek(),r=this.tagNameBuffer;o==="<"&&!this.isIgnoredEndTag()?(this.delegate.finishData(),this.transitionTo("tagOpen"),this.markTagStart(),this.consume()):o==="&"&&r!=="script"&&r!=="style"?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(o))},tagOpen:function(){var o=this.consume();o==="!"?this.transitionTo("markupDeclarationOpen"):o==="/"?this.transitionTo("endTagOpen"):(o==="@"||o===":"||Qt(o))&&(this.transitionTo("tagName"),this.tagNameBuffer="",this.delegate.beginStartTag(),this.appendToTagName(o))},markupDeclarationOpen:function(){var o=this.consume();if(o==="-"&&this.peek()==="-")this.consume(),this.transitionTo("commentStart"),this.delegate.beginComment();else{var r=o.toUpperCase()+this.input.substring(this.index,this.index+6).toUpperCase();r==="DOCTYPE"&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.transitionTo("doctype"),this.delegate.beginDoctype&&this.delegate.beginDoctype())}},doctype:function(){var o=this.consume();O(o)&&this.transitionTo("beforeDoctypeName")},beforeDoctypeName:function(){var o=this.consume();O(o)||(this.transitionTo("doctypeName"),this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(o.toLowerCase()))},doctypeName:function(){var o=this.consume();O(o)?this.transitionTo("afterDoctypeName"):o===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(o.toLowerCase())},afterDoctypeName:function(){var o=this.consume();if(!O(o))if(o===">")this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData");else{var r=o.toUpperCase()+this.input.substring(this.index,this.index+5).toUpperCase(),a=r.toUpperCase()==="PUBLIC",c=r.toUpperCase()==="SYSTEM";(a||c)&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume()),a?this.transitionTo("afterDoctypePublicKeyword"):c&&this.transitionTo("afterDoctypeSystemKeyword")}},afterDoctypePublicKeyword:function(){var o=this.peek();O(o)?(this.transitionTo("beforeDoctypePublicIdentifier"),this.consume()):o==='"'?(this.transitionTo("doctypePublicIdentifierDoubleQuoted"),this.consume()):o==="'"?(this.transitionTo("doctypePublicIdentifierSingleQuoted"),this.consume()):o===">"&&(this.consume(),this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},doctypePublicIdentifierDoubleQuoted:function(){var o=this.consume();o==='"'?this.transitionTo("afterDoctypePublicIdentifier"):o===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(o)},doctypePublicIdentifierSingleQuoted:function(){var o=this.consume();o==="'"?this.transitionTo("afterDoctypePublicIdentifier"):o===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(o)},afterDoctypePublicIdentifier:function(){var o=this.consume();O(o)?this.transitionTo("betweenDoctypePublicAndSystemIdentifiers"):o===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):o==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):o==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted")},betweenDoctypePublicAndSystemIdentifiers:function(){var o=this.consume();O(o)||(o===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):o==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):o==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted"))},doctypeSystemIdentifierDoubleQuoted:function(){var o=this.consume();o==='"'?this.transitionTo("afterDoctypeSystemIdentifier"):o===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(o)},doctypeSystemIdentifierSingleQuoted:function(){var o=this.consume();o==="'"?this.transitionTo("afterDoctypeSystemIdentifier"):o===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(o)},afterDoctypeSystemIdentifier:function(){var o=this.consume();O(o)||o===">"&&(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},commentStart:function(){var o=this.consume();o==="-"?this.transitionTo("commentStartDash"):o===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData(o),this.transitionTo("comment"))},commentStartDash:function(){var o=this.consume();o==="-"?this.transitionTo("commentEnd"):o===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("-"),this.transitionTo("comment"))},comment:function(){var o=this.consume();o==="-"?this.transitionTo("commentEndDash"):this.delegate.appendToCommentData(o)},commentEndDash:function(){var o=this.consume();o==="-"?this.transitionTo("commentEnd"):(this.delegate.appendToCommentData("-"+o),this.transitionTo("comment"))},commentEnd:function(){var o=this.consume();o===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("--"+o),this.transitionTo("comment"))},tagName:function(){var o=this.consume();O(o)?this.transitionTo("beforeAttributeName"):o==="/"?this.transitionTo("selfClosingStartTag"):o===">"?(this.delegate.finishTag(),this.transitionTo("beforeData")):this.appendToTagName(o)},endTagName:function(){var o=this.consume();O(o)?(this.transitionTo("beforeAttributeName"),this.tagNameBuffer=""):o==="/"?(this.transitionTo("selfClosingStartTag"),this.tagNameBuffer=""):o===">"?(this.delegate.finishTag(),this.transitionTo("beforeData"),this.tagNameBuffer=""):this.appendToTagName(o)},beforeAttributeName:function(){var o=this.peek();if(O(o)){this.consume();return}else o==="/"?(this.transitionTo("selfClosingStartTag"),this.consume()):o===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):o==="="?(this.delegate.reportSyntaxError("attribute name cannot start with equals sign"),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(o)):(this.transitionTo("attributeName"),this.delegate.beginAttribute())},attributeName:function(){var o=this.peek();O(o)?(this.transitionTo("afterAttributeName"),this.consume()):o==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):o==="="?(this.transitionTo("beforeAttributeValue"),this.consume()):o===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):o==='"'||o==="'"||o==="<"?(this.delegate.reportSyntaxError(o+" is not a valid character within attribute names"),this.consume(),this.delegate.appendToAttributeName(o)):(this.consume(),this.delegate.appendToAttributeName(o))},afterAttributeName:function(){var o=this.peek();if(O(o)){this.consume();return}else o==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):o==="="?(this.consume(),this.transitionTo("beforeAttributeValue")):o===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(o))},beforeAttributeValue:function(){var o=this.peek();O(o)?this.consume():o==='"'?(this.transitionTo("attributeValueDoubleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):o==="'"?(this.transitionTo("attributeValueSingleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):o===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.transitionTo("attributeValueUnquoted"),this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(o))},attributeValueDoubleQuoted:function(){var o=this.consume();o==='"'?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):o==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(o)},attributeValueSingleQuoted:function(){var o=this.consume();o==="'"?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):o==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(o)},attributeValueUnquoted:function(){var o=this.peek();O(o)?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("beforeAttributeName")):o==="/"?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):o==="&"?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef()||"&")):o===">"?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.consume(),this.delegate.appendToAttributeValue(o))},afterAttributeValueQuoted:function(){var o=this.peek();O(o)?(this.consume(),this.transitionTo("beforeAttributeName")):o==="/"?(this.consume(),this.transitionTo("selfClosingStartTag")):o===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},selfClosingStartTag:function(){var o=this.peek();o===">"?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},endTagOpen:function(){var o=this.consume();(o==="@"||o===":"||Qt(o))&&(this.transitionTo("endTagName"),this.tagNameBuffer="",this.delegate.beginEndTag(),this.appendToTagName(o))}},this.reset()}return e.prototype.reset=function(){this.transitionTo("beforeData"),this.input="",this.tagNameBuffer="",this.index=0,this.line=1,this.column=0,this.delegate.reset()},e.prototype.transitionTo=function(t){this.state=t},e.prototype.tokenize=function(t){this.reset(),this.tokenizePart(t),this.tokenizeEOF()},e.prototype.tokenizePart=function(t){for(this.input+=Qn(t);this.index<this.input.length;){var n=this.states[this.state];if(n!==void 0)n.call(this);else throw new Error("unhandled state "+this.state)}},e.prototype.tokenizeEOF=function(){this.flushData()},e.prototype.flushData=function(){this.state==="data"&&(this.delegate.finishData(),this.transitionTo("beforeData"))},e.prototype.peek=function(){return this.input.charAt(this.index)},e.prototype.consume=function(){var t=this.peek();return this.index++,t===`
`?(this.line++,this.column=0):this.column++,t},e.prototype.consumeCharRef=function(){var t=this.input.indexOf(";",this.index);if(t!==-1){var n=this.input.slice(this.index,t),i=this.entityParser.parse(n);if(i){for(var o=n.length;o;)this.consume(),o--;return this.consume(),i}}},e.prototype.markTagStart=function(){this.delegate.tagOpen()},e.prototype.appendToTagName=function(t){this.tagNameBuffer+=t,this.delegate.appendToTagName(t)},e.prototype.isIgnoredEndTag=function(){var t=this.tagNameBuffer;return t==="title"&&this.input.substring(this.index,this.index+8)!=="</title>"||t==="style"&&this.input.substring(this.index,this.index+8)!=="</style>"||t==="script"&&this.input.substring(this.index,this.index+9)!=="<\/script>"},e}(),Jn=function(){function e(t,n){n===void 0&&(n={}),this.options=n,this.token=null,this.startLine=1,this.startColumn=0,this.tokens=[],this.tokenizer=new Gn(this,t,n.mode),this._currentAttribute=void 0}return e.prototype.tokenize=function(t){return this.tokens=[],this.tokenizer.tokenize(t),this.tokens},e.prototype.tokenizePart=function(t){return this.tokens=[],this.tokenizer.tokenizePart(t),this.tokens},e.prototype.tokenizeEOF=function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},e.prototype.reset=function(){this.token=null,this.startLine=1,this.startColumn=0},e.prototype.current=function(){var t=this.token;if(t===null)throw new Error("token was unexpectedly null");if(arguments.length===0)return t;for(var n=0;n<arguments.length;n++)if(t.type===arguments[n])return t;throw new Error("token type was unexpectedly "+t.type)},e.prototype.push=function(t){this.token=t,this.tokens.push(t)},e.prototype.currentAttribute=function(){return this._currentAttribute},e.prototype.addLocInfo=function(){this.options.loc&&(this.current().loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},e.prototype.beginDoctype=function(){this.push({type:"Doctype",name:""})},e.prototype.appendToDoctypeName=function(t){this.current("Doctype").name+=t},e.prototype.appendToDoctypePublicIdentifier=function(t){var n=this.current("Doctype");n.publicIdentifier===void 0?n.publicIdentifier=t:n.publicIdentifier+=t},e.prototype.appendToDoctypeSystemIdentifier=function(t){var n=this.current("Doctype");n.systemIdentifier===void 0?n.systemIdentifier=t:n.systemIdentifier+=t},e.prototype.endDoctype=function(){this.addLocInfo()},e.prototype.beginData=function(){this.push({type:"Chars",chars:""})},e.prototype.appendToData=function(t){this.current("Chars").chars+=t},e.prototype.finishData=function(){this.addLocInfo()},e.prototype.beginComment=function(){this.push({type:"Comment",chars:""})},e.prototype.appendToCommentData=function(t){this.current("Comment").chars+=t},e.prototype.finishComment=function(){this.addLocInfo()},e.prototype.tagOpen=function(){},e.prototype.beginStartTag=function(){this.push({type:"StartTag",tagName:"",attributes:[],selfClosing:!1})},e.prototype.beginEndTag=function(){this.push({type:"EndTag",tagName:""})},e.prototype.finishTag=function(){this.addLocInfo()},e.prototype.markTagAsSelfClosing=function(){this.current("StartTag").selfClosing=!0},e.prototype.appendToTagName=function(t){this.current("StartTag","EndTag").tagName+=t},e.prototype.beginAttribute=function(){this._currentAttribute=["","",!1]},e.prototype.appendToAttributeName=function(t){this.currentAttribute()[0]+=t},e.prototype.beginAttributeValue=function(t){this.currentAttribute()[2]=t},e.prototype.appendToAttributeValue=function(t){this.currentAttribute()[1]+=t},e.prototype.finishAttributeValue=function(){this.current("StartTag").attributes.push(this._currentAttribute)},e.prototype.reportSyntaxError=function(t){this.current().syntaxError=t},e}();function Yn(e,t){var n=new Jn(new Fn(Un),t);return n.tokenize(e)}const Gt="LinkifyResult",et="StartTag",Jt="EndTag",St="Chars",Xn="Comment",Zn="Doctype";function Yt(e,t){t===void 0&&(t={});const n=Yn(e),i=[],o=[],r=new Tt(t,ns);for(let a=0;a<n.length;a++){const c=n[a];if(c.type===et){i.push(c);const u=c.tagName.toUpperCase();if(!(u==="A"||r.ignoreTags.indexOf(u)>=0))continue;let g=i.length;ts(u,n,++a,i),a+=i.length-g-1}else if(c.type!==St)i.push(c);else{const u=es(c.chars,r);i.push.apply(i,u)}}for(let a=0;a<i.length;a++){const c=i[a];switch(c.type){case Gt:o.push(c.rendered);break;case et:{let u="<"+c.tagName;c.attributes.length>0&&(u+=" "+os(c.attributes).join(" ")),c.selfClosing&&(u+=" /"),u+=">",o.push(u);break}case Jt:o.push(`</${c.tagName}>`);break;case St:o.push(Ct(c.chars));break;case Xn:o.push(`<!--${Ct(c.chars)}-->`);break;case Zn:{let u=`<!DOCTYPE ${c.name}`;c.publicIdentifier&&(u+=` PUBLIC "${c.publicIdentifier}"`),c.systemIdentifier&&(u+=` "${c.systemIdentifier}"`),u+=">",o.push(u);break}}}return o.join("")}function es(e,t){const n=zn(e),i=[];for(let o=0;o<n.length;o++){const r=n[o];r.t==="nl"&&t.get("nl2br")?i.push({type:et,tagName:"br",attributes:[],selfClosing:!0}):!r.isLink||!t.check(r)?i.push({type:St,chars:r.toString()}):i.push({type:Gt,rendered:t.render(r)})}return i}function ts(e,t,n,i){let o=1;for(;n<t.length&&o>0;){let r=t[n];r.type===et&&r.tagName.toUpperCase()===e?o++:r.type===Jt&&r.tagName.toUpperCase()===e&&o--,i.push(r),n++}return i}function ns(e){let{tagName:t,attributes:n,content:i}=e;return`<${t} ${ss(n)}>${Ct(i)}</${t}>`}function Ct(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Xt(e){return e.replace(/"/g,"&quot;")}function ss(e){const t=[];for(const n in e){const i=e[n]+"";t.push(`${n}="${Xt(i)}"`)}return t.join(" ")}function os(e){const t=[];for(let n=0;n<e.length;n++){const i=e[n][0],o=e[n][1]+"";t.push(`${i}="${Xt(o)}"`)}return t}const Zt=s.defineComponent({__name:"button",props:{button:{}},setup(e){const t=U(),n=e;function i(){n.button.type===Bt.web_url?window.open(n.button.url):t.sendUserMessage(n.button.title)}return(o,r)=>(s.openBlock(),s.createElementBlock("button",{class:"tvk-btn tvk-btn-action",onClick:i},s.toDisplayString(n.button.title),1))}}),is={class:"tvk-footnote"},rs=["href"],as={key:1,class:"tvk-footnote-title"},cs={key:2,class:"tvk-footnote-content"},ls=["innerHTML"],us=s.defineComponent({__name:"footnote",props:{footnote:{}},setup(e){const t=L.getOptions(),n=e,i=s.ref(!1);function o(){return Yt(n.footnote.content,{target:"_blank"})}const r=s.ref(null);function a(){return r.value?r.value.offsetHeight<r.value.scrollHeight:!1}return(c,u)=>(s.openBlock(),s.createElementBlock("div",is,[n.footnote.url?(s.openBlock(),s.createElementBlock("a",{key:0,href:n.footnote.url,target:"_blank",class:"tvk-footnote-title"},s.toDisplayString(n.footnote.title),9,rs)):s.createCommentVNode("",!0),n.footnote.url?s.createCommentVNode("",!0):(s.openBlock(),s.createElementBlock("span",as,s.toDisplayString(n.footnote.title),1)),n.footnote.content?(s.openBlock(),s.createElementBlock("div",cs,[s.createElementVNode("div",{ref_key:"contentTxt",ref:r,style:s.normalizeStyle({"--tvk-clamp-nb-line":s.unref(t).preferences.messages.footNotes.clampSourceContentNbLines}),class:s.normalizeClass({"tvk-clamp":s.unref(t).preferences.messages.footNotes.clampSourceContent&&!i.value})},[s.createElementVNode("span",{innerHTML:o()},null,8,ls)],6),n.footnote.content&&s.unref(t).preferences.messages.footNotes.clampSourceContent&&!i.value&&a()?(s.openBlock(),s.createElementBlock("a",{key:0,href:"javascript:void(0)",class:"tvk-footnote-content-show-more-link",onClick:u[0]||(u[0]=d=>i.value=!i.value)},s.toDisplayString(s.unref(t).wording.messages.message.footnotes.showMoreLink),1)):s.createCommentVNode("",!0)])):s.createCommentVNode("",!0)]))}}),ds={class:"tvk-footnotes"},fs={class:"tvk-footnotes-sources-label"},en=s.defineComponent({__name:"footnotes",props:{footnotes:{}},setup(e){const t=L.getOptions(),n=e;return(i,o)=>(s.openBlock(),s.createElementBlock("div",ds,[s.createElementVNode("span",fs,s.toDisplayString(s.unref(t).wording.messages.message.footnotes.sources),1),(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.footnotes,r=>(s.openBlock(),s.createBlock(us,{footnote:r},null,8,["footnote"]))),256))]))}}),hs=["innerHTML"],ps=s.defineComponent({__name:"message-text",props:{message:{}},setup(e){const t=L.getOptions(),n=e;function i(){return Yt(n.message.text,{target:"_blank"})}return(o,r)=>{var a;return s.openBlock(),s.createElementBlock(s.Fragment,null,[s.createElementVNode("div",{innerHTML:i(),tabindex:"1"},null,8,hs),(a=n.message.footnotes)!=null&&a.length&&s.unref(t).preferences.messages.footNotes.display&&!s.unref(t).preferences.messages.footNotes.displayOnMessageSide?(s.openBlock(),s.createBlock(en,{key:0,footnotes:n.message.footnotes},null,8,["footnotes"])):s.createCommentVNode("",!0),(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.message.buttons,c=>(s.openBlock(),s.createBlock(Zt,{button:c},{default:s.withCtx(()=>[s.createTextVNode(s.toDisplayString(c.title),1)]),_:2},1032,["button"]))),256))],64)}}}),ms={class:"tvk-card"},gs=["href"],ys=["src","alt"],bs=["href"],ks={key:2},Ts={key:3},Es={key:4},tn=s.defineComponent({__name:"message-card",props:{card:{}},setup(e){var r,a,c;const t=U(),n=e,i=((a=(r=n.card)==null?void 0:r.file)==null?void 0:a.description)??((c=n.card)==null?void 0:c.title);function o(u){n.card.file._loaded||(n.card.file._loaded=!0,t.scrollMessages())}return(u,d)=>{var g,h,f,C,b,m,S,E,I,w,j,D,y,N,k,T,H,V,$,ee;return s.openBlock(),s.createElementBlock("div",ms,[((h=(g=n.card)==null?void 0:g.file)==null?void 0:h.type)==="image"?(s.openBlock(),s.createElementBlock("a",{key:0,href:(C=(f=n.card)==null?void 0:f.file)==null?void 0:C.url,target:"_blank"},[s.createElementVNode("img",{src:(m=(b=n.card)==null?void 0:b.file)==null?void 0:m.url,alt:s.unref(i),onLoad:o,class:"tvk-thumbnail"},null,40,ys)],8,gs)):s.createCommentVNode("",!0),((E=(S=n.card)==null?void 0:S.file)==null?void 0:E.type)==="file"?(s.openBlock(),s.createElementBlock("a",{key:1,href:(w=(I=n.card)==null?void 0:I.file)==null?void 0:w.url,target:"_blank"},s.toDisplayString((D=(j=n.card)==null?void 0:j.file)==null?void 0:D.name),9,bs)):s.createCommentVNode("",!0),(y=n.card)!=null&&y.title?(s.openBlock(),s.createElementBlock("div",ks,[s.createElementVNode("strong",null,s.toDisplayString((N=n.card)==null?void 0:N.title),1)])):s.createCommentVNode("",!0),(k=n.card)!=null&&k.subTitle?(s.openBlock(),s.createElementBlock("div",Ts,s.toDisplayString((T=n.card)==null?void 0:T.subTitle),1)):s.createCommentVNode("",!0),(V=(H=n.card)==null?void 0:H.file)!=null&&V.description?(s.openBlock(),s.createElementBlock("div",Es,s.toDisplayString((ee=($=n.card)==null?void 0:$.file)==null?void 0:ee.description),1)):s.createCommentVNode("",!0),(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.card.buttons,se=>(s.openBlock(),s.createBlock(Zt,{button:se},{default:s.withCtx(()=>[s.createTextVNode(s.toDisplayString(se.title),1)]),_:2},1032,["button"]))),256))])}}}),nn="transform 0.2s",Ss=s.defineComponent({__name:"message-carousel",props:{carousel:{}},setup(e){const t=e,n=s.ref(t.carousel.cards),i=s.ref([]),o=s.ref(null),r=s.ref(null),a=s.ref({}),c=s.ref({}),u=s.ref(!1);function d(){var S;const m=(S=o.value)==null?void 0:S.offsetWidth;a.value={overflow:"hidden","max-width":`${m}px`}}function g(){return i.value.reduce((m,S)=>m+S.offsetWidth,0)}function h(){if(u.value)return;u.value=!0,d();const m=g(),S=n.value[0];n.value.push(S);const E=i.value[0];c.value={transition:nn,transform:`translateX(-${E.offsetWidth}px)`,width:`${m+E.offsetWidth+1}px`},C(()=>{n.value.shift(),b(),u.value=!1})}function f(){if(u.value)return;u.value=!0,d();const m=g(),S=n.value[n.value.length-1];n.value.unshift(S);const E=i.value[i.value.length-1];c.value={transition:"none",transform:`translateX(-${E.offsetWidth}px)`,width:`${m+E.offsetWidth+1}px`},setTimeout(()=>{c.value={transition:nn,transform:"translateX(0)",width:`${m+E.offsetWidth+1}px`},C(()=>{n.value.pop(),b(),u.value=!1})})}function C(m){var E;const S=()=>{var I;m(),(I=r.value)==null||I.removeEventListener("transitionend",S)};(E=r.value)==null||E.addEventListener("transitionend",S)}function b(){a.value={},c.value={transition:"none",transform:"translateX(0)"}}return(m,S)=>(s.openBlock(),s.createElementBlock(s.Fragment,null,[s.createElementVNode("div",{class:"tvk-carousel",ref_key:"carouselRef",ref:o,style:s.normalizeStyle(a.value)},[s.createElementVNode("div",{class:"tvk-carousel-inner",ref_key:"innerRef",ref:r,style:s.normalizeStyle(c.value)},[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.value,E=>(s.openBlock(),s.createElementBlock("div",{class:"tvk-carousel-card",key:JSON.stringify(E),ref_for:!0,ref_key:"cardsRefs",ref:i},[s.createVNode(tn,{card:E},null,8,["card"])]))),128))],4)],4),s.createElementVNode("div",{class:"tvk-carousel-controls"},[s.createElementVNode("button",{class:"tvk-btn",onClick:f},"prev"),s.createElementVNode("button",{class:"tvk-btn",onClick:h},"next")])],64))}}),Cs=s.defineComponent({__name:"message-image",props:{message:Object},setup(e){return L.getOptions(),(t,n)=>"Image type not yet implemented"}}),Ns={class:"tvk-message-answer"},As={key:0,class:"tvk-message-header"},Ds={key:0,class:"tvk-message-header-avatar"},_s=["src"],Is=["src"],ws={key:1,class:"tvk-message-header-label"},xs={class:"tvk-message-header-label-user"},Bs={class:"tvk-message-header-label-bot"},Os={key:1,class:"tvk-message-body"},Ls={key:2,class:"tvk-message-body-from-app"},Rs={key:0,class:"tvk-message-loader"},Hs={key:1,class:"tvk-error-connection"},Vs=s.createElementVNode("i",{class:"tvk-error-icon bi bi-exclamation-triangle"},null,-1),Ps={key:0,class:"tvk-side-footnotes"},Ms=s.defineComponent({__name:"message",props:{message:{}},setup(e){const t=L.getOptions(),n=e;return(i,o)=>{var r;return n.message.author!==s.unref(A).user||!s.unref(t).preferences.messages.message.hideUserMessages?(s.openBlock(),s.createElementBlock("div",{key:0,class:s.normalizeClass(["tvk-message",{"tvk-message-user":n.message.author===s.unref(A).user,"tvk-message-bot":n.message.author===s.unref(A).bot}])},[s.createElementVNode("div",Ns,[s.unref(t).preferences.messages.message.header.display&&n.message.author!==s.unref(A).app?(s.openBlock(),s.createElementBlock("div",As,[s.unref(t).preferences.messages.message.header.avatar.display?(s.openBlock(),s.createElementBlock("div",Ds,[!s.unref(t).preferences.messages.message.header.avatar.userImage&&s.unref(t).preferences.messages.message.header.avatar.userIcon&&n.message.author===s.unref(A).user?(s.openBlock(),s.createElementBlock("i",{key:0,class:s.normalizeClass(["tvk-message-header-avatar-user",s.unref(t).preferences.messages.message.header.avatar.userIcon])},null,2)):s.createCommentVNode("",!0),s.unref(t).preferences.messages.message.header.avatar.userImage&&n.message.author===s.unref(A).user?(s.openBlock(),s.createElementBlock("img",{key:1,src:s.unref(t).preferences.messages.message.header.avatar.userImage.src,style:s.normalizeStyle({width:s.unref(t).preferences.messages.message.header.avatar.userImage.width,height:s.unref(t).preferences.messages.message.header.avatar.userImage.height}),role:"none"},null,12,_s)):s.createCommentVNode("",!0),!s.unref(t).preferences.messages.message.header.avatar.botImage&&s.unref(t).preferences.messages.message.header.avatar.botIcon&&n.message.author===s.unref(A).bot?(s.openBlock(),s.createElementBlock("i",{key:2,class:s.normalizeClass(["tvk-message-header-avatar-bot",s.unref(t).preferences.messages.message.header.avatar.botIcon])},null,2)):s.createCommentVNode("",!0),s.unref(t).preferences.messages.message.header.avatar.botImage&&n.message.author===s.unref(A).bot?(s.openBlock(),s.createElementBlock("img",{key:3,src:s.unref(t).preferences.messages.message.header.avatar.botImage.src,style:s.normalizeStyle({width:s.unref(t).preferences.messages.message.header.avatar.botImage.width,height:s.unref(t).preferences.messages.message.header.avatar.botImage.height}),role:"none"},null,12,Is)):s.createCommentVNode("",!0)])):s.createCommentVNode("",!0),s.unref(t).preferences.messages.message.header.label.display?(s.openBlock(),s.createElementBlock("div",ws,[s.createElementVNode("span",xs,s.toDisplayString(s.unref(t).wording.messages.message.header.labelUser),1),s.createElementVNode("span",Bs,s.toDisplayString(s.unref(t).wording.messages.message.header.labelBot),1)])):s.createCommentVNode("",!0)])):s.createCommentVNode("",!0),n.message.author!==s.unref(A).app?(s.openBlock(),s.createElementBlock("div",Os,[n.message.type===s.unref(B).message?(s.openBlock(),s.createBlock(ps,{key:0,message:n.message},null,8,["message"])):s.createCommentVNode("",!0),n.message.type===s.unref(B).card?(s.openBlock(),s.createBlock(tn,{key:1,card:n.message},null,8,["card"])):s.createCommentVNode("",!0),n.message.type===s.unref(B).carousel?(s.openBlock(),s.createBlock(Ss,{key:2,carousel:n.message},null,8,["carousel"])):s.createCommentVNode("",!0),n.message.type===s.unref(B).image?(s.openBlock(),s.createBlock(Cs,{key:3,message:n.message},null,8,["message"])):s.createCommentVNode("",!0)])):s.createCommentVNode("",!0),n.message.author===s.unref(A).app?(s.openBlock(),s.createElementBlock("div",Ls,[n.message.type===s.unref(B).loader?(s.openBlock(),s.createElementBlock("div",Rs)):s.createCommentVNode("",!0),n.message.type===s.unref(B).error?(s.openBlock(),s.createElementBlock("div",Hs,[Vs,s.createTextVNode(" "+s.toDisplayString(n.message.text),1)])):s.createCommentVNode("",!0)])):s.createCommentVNode("",!0)]),(r=n.message.footnotes)!=null&&r.length&&s.unref(t).preferences.messages.footNotes.display&&s.unref(t).preferences.messages.footNotes.displayOnMessageSide?(s.openBlock(),s.createElementBlock("div",Ps,[s.createVNode(en,{footnotes:n.message.footnotes},null,8,["footnotes"])])):s.createCommentVNode("",!0)],2)):s.createCommentVNode("",!0)}}}),zs=s.createElementVNode("div",{class:"tvk-shader tvk-shader-top"},null,-1),Us=s.createElementVNode("div",{class:"tvk-shader tvk-shader-bottom"},null,-1),js=s.defineComponent({__name:"messages",setup(e){const t=U(),n=s.ref();function i(){setTimeout(()=>{n.value.scrollTop=n.value.scrollHeight},100)}return s.onMounted(()=>{i()}),t.$onAction(({name:o,store:r,args:a,after:c})=>{o==="scrollMessages"&&c(()=>{setTimeout(()=>{i()})})}),(o,r)=>(s.openBlock(),s.createElementBlock("div",{ref_key:"messagesWrapper",ref:n,class:"tvk-messages"},[zs,(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(s.unref(t).getMessages,a=>(s.openBlock(),s.createBlock(Ms,{message:a},null,8,["message"]))),256)),Us],512))}}),$s=s.defineComponent({__name:"App",setup(e){const t=L.getOptions(),n=U();let i=s.ref(r()),o=s.ref(!0);function r(){return(Math.random()+1).toString(36).substring(7)}return n.$onAction(({name:a,store:c,args:u,after:d})=>{a==="updateApplication"&&d(()=>{i.value=r(),o.value=!1,setTimeout(()=>{o.value=!0})})}),(a,c)=>s.unref(o)?(s.openBlock(),s.createElementBlock("div",{class:"tvk-wrapper",key:s.unref(i)},[s.unref(n).getMessages.length||!s.unref(t).preferences.messages.hideIfNoMessages?(s.openBlock(),s.createBlock(js,{key:0})):s.createCommentVNode("",!0),s.createVNode(Cn)])):s.createCommentVNode("",!0)}});function qs(){var t,n;const e=L.getOptions();if((t=e==null?void 0:e.initialization)!=null&&t.welcomeMessage||(n=e==null?void 0:e.initialization)!=null&&n.openingMessage){const i=U(),o=i.getStoredState();(!o||!o.messages.length)&&(e.initialization.welcomeMessage&&i.addMessage({type:B.message,author:A.bot,date:Date.now(),text:e.initialization.welcomeMessage}),e.initialization.openingMessage&&i.sendUserMessage(e.initialization.openingMessage,!1))}}let K,sn;function Fs(e,t,n){return sn=e,on(t,n),K}function Ws(e,t){on(e,t)}function on(e,t){K!=null&&K.unmount&&K.unmount(),K=s.createApp($s),K.provide(xt,e),L.clearInstance(),L.setOptions(t);const n=rn();K.use(n),K.mount(sn),qs()}function vs(){return JSON.parse(JSON.stringify(Ot))}function Ks(){return JSON.parse(JSON.stringify(L.getOptions()))}function Qs(e,t){const n=L.getOptions(),i=e.split(".");let o=n;for(let r=0;r<i.length;r++){const a=i[r];r<i.length-1?(o[a]||(o[a]={}),o=o[a]):(o[a]=t,U().updateApplication())}}function Gs(e){U().addMessage(e)}_.addTvkMessage=Gs,_.getTvkCurrentOptions=Ks,_.getTvkDefaultOptions=vs,_.reload=Ws,_.renderChat=Fs,_.updateTvkOption=Qs,Object.defineProperty(_,Symbol.toStringTag,{value:"Module"})});
